function expose(){var t=window.P;P.noConflict=function(){return window.P=t,this},window.P=P}var COMPILED=!1,goog=goog||{};goog.global=this,goog.global.CLOSURE_UNCOMPILED_DEFINES,goog.global.CLOSURE_DEFINES,goog.isDef=function(t){return void 0!==t},goog.exportPath_=function(t,o,e){var n=t.split("."),r=e||goog.global;n[0]in r||!r.execScript||r.execScript("var "+n[0]);for(var g;n.length&&(g=n.shift());)!n.length&&goog.isDef(o)?r[g]=o:r=r[g]?r[g]:r[g]={}},goog.define=function(t,o){var e=o;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,t)?e=goog.global.CLOSURE_UNCOMPILED_DEFINES[t]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,t)&&(e=goog.global.CLOSURE_DEFINES[t])),goog.exportPath_(t,e)},goog.DEBUG=!0,goog.define("goog.LOCALE","en"),goog.define("goog.TRUSTED_SITE",!0),goog.define("goog.STRICT_MODE_COMPATIBLE",!1),goog.provide=function(t){if(!COMPILED&&goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');goog.constructNamespace_(t)},goog.constructNamespace_=function(t,o){if(!COMPILED){delete goog.implicitNamespaces_[t];for(var e=t;(e=e.substring(0,e.lastIndexOf(".")))&&!goog.getObjectByName(e);)goog.implicitNamespaces_[e]=!0}goog.exportPath_(t,o)},goog.module=function(t){if(!goog.isString(t)||!t)throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+t+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=t,!COMPILED){if(goog.isProvided_(t))throw Error('Namespace "'+t+'" already declared.');delete goog.implicitNamespaces_[t]}},goog.module.get=function(t){return goog.module.getInternal_(t)},goog.module.getInternal_=function(t){return COMPILED?void 0:goog.isProvided_(t)?t in goog.loadedModules_?goog.loadedModules_[t]:goog.getObjectByName(t):null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareTestMethods=function(){if(!goog.isInModuleLoader_())throw new Error("goog.module.declareTestMethods must be called from within a goog.module");goog.moduleLoaderState_.declareTestMethods=!0},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(t){if(COMPILED&&!goog.DEBUG)throw t=t||"",Error("Importing test-only code into non-debug environment"+(t?": "+t:"."))},goog.forwardDeclare=function(t){},COMPILED||(goog.isProvided_=function(t){return t in goog.loadedModules_||!goog.implicitNamespaces_[t]&&goog.isDefAndNotNull(goog.getObjectByName(t))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(t,o){for(var e,n=t.split("."),r=o||goog.global;e=n.shift();){if(!goog.isDefAndNotNull(r[e]))return null;r=r[e]}return r},goog.globalize=function(t,o){var e=o||goog.global;for(var n in t)e[n]=t[n]},goog.addDependency=function(t,o,e,n){if(goog.DEPENDENCIES_ENABLED){for(var r,g,i=t.replace(/\\/g,"/"),s=goog.dependencies_,a=0;r=o[a];a++)s.nameToPath[r]=i,s.pathIsModule[i]=!!n;for(var l=0;g=e[l];l++)i in s.requires||(s.requires[i]={}),s.requires[i][g]=!0}},goog.define("goog.ENABLE_DEBUG_LOADER",!0),goog.logToConsole_=function(t){goog.global.console&&goog.global.console.error(t)},goog.require=function(t){if(!COMPILED){if(goog.isProvided_(t))return goog.isInModuleLoader_()?goog.module.getInternal_(t):null;if(goog.ENABLE_DEBUG_LOADER){var o=goog.getPathFromDeps_(t);if(o)return goog.included_[o]=!0,goog.writeScripts_(),null}var e="goog.require could not find: "+t;throw goog.logToConsole_(e),Error(e)}},goog.basePath="",goog.global.CLOSURE_BASE_PATH,goog.global.CLOSURE_NO_DEPS,goog.global.CLOSURE_IMPORT_SCRIPT,goog.nullFunction=function(){},goog.identityFunction=function(t,o){return t},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(t){t.getInstance=function(){return t.instance_?t.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=t),t.instance_=new t)}},goog.instantiatedSingletons_=[],goog.define("goog.LOAD_MODULE_USING_EVAL",!0),goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG),goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var t=goog.global.document;return"undefined"!=typeof t&&"write"in t},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)return void(goog.basePath=goog.global.CLOSURE_BASE_PATH);if(goog.inHtmlDocument_())for(var t=goog.global.document,o=t.getElementsByTagName("script"),e=o.length-1;e>=0;--e){var n=o[e].src,r=n.lastIndexOf("?"),g=-1==r?n.length:r;if("base.js"==n.substr(g-7,7))return void(goog.basePath=n.substr(0,g-7))}},goog.importScript_=function(t,o){var e=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;e(t,o)&&(goog.dependencies_.written[t]=!0)},goog.IS_OLD_IE_=goog.global.document&&goog.global.document.all&&!goog.global.atob,goog.importModule_=function(t){var o='goog.retrieveAndExecModule_("'+t+'");';goog.importScript_("",o)&&(goog.dependencies_.written[t]=!0)},goog.queuedModules_=[],goog.retrieveAndExecModule_=function(t){for(var o;-1!=(o=t.indexOf("/./"));)t=t.substr(0,o)+t.substr(o+"/.".length);for(;-1!=(o=t.indexOf("/../"));){var e=t.lastIndexOf("/",o-1);t=t.substr(0,e)+t.substr(o+"/..".length)}var n=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,r=null,g=new goog.global.XMLHttpRequest;if(g.onload=function(){r=this.responseText},g.open("get",t,!1),g.send(),r=g.responseText,null==r)throw new Error("load of "+t+"failed");var i=goog.wrapModule_(t,r),s=goog.IS_OLD_IE_;s?goog.queuedModules_.push(i):n(t,i),goog.dependencies_.written[t]=!0},goog.wrapModule_=function(t,o){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(o+"\n//# sourceURL="+t+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+o+"\n;return exports});\n//# sourceURL="+t+"\n"},goog.loadQueuedModules_=function(){var t=goog.queuedModules_.length;if(t>0){var o=goog.queuedModules_;goog.queuedModules_=[];for(var e=0;t>e;e++){var n=o[e];goog.globalEval(n)}}},goog.loadModule=function(t){try{goog.moduleLoaderState_={moduleName:void 0,declareTestMethods:!1};var o;if(goog.isFunction(t))o=t.call(goog.global,{});else{if(!goog.isString(t))throw Error("Invalid module definition");o=goog.loadModuleFromSource_.call(goog.global,t)}var e=goog.moduleLoaderState_.moduleName;if(!goog.isString(e)||!e)throw Error('Invalid module name "'+e+'"');if(goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(e,o):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(o),goog.loadedModules_[e]=o,goog.moduleLoaderState_.declareTestMethods)for(var n in o)(0===n.indexOf("test",0)||"tearDown"==n||"setup"==n)&&(goog.global[n]=o[n])}finally{goog.moduleLoaderState_=null}},goog.loadModuleFromSource_=function(){"use strict";var exports={};return eval(arguments[0]),exports},goog.writeScriptTag_=function(t,o){if(goog.inHtmlDocument_()){var e=goog.global.document;if("complete"==e.readyState){var n=/\bdeps.js$/.test(t);if(n)return!1;throw Error('Cannot write "'+t+'" after document load')}var r=goog.IS_OLD_IE_;if(void 0===o)if(r){var g=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";e.write('<script type="text/javascript" src="'+t+'"'+g+"></script>")}else e.write('<script type="text/javascript" src="'+t+'"></script>');else e.write('<script type="text/javascript">'+o+"</script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(t,o){return"complete"==t.readyState&&goog.lastNonModuleScriptIndex_==o&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(){function t(r){if(!(r in n.written)){if(r in n.visited)return void(r in e||(e[r]=!0,o.push(r)));if(n.visited[r]=!0,r in n.requires)for(var g in n.requires[r])if(!goog.isProvided_(g)){if(!(g in n.nameToPath))throw Error("Undefined nameToPath for "+g);t(n.nameToPath[g])}r in e||(e[r]=!0,o.push(r))}}var o=[],e={},n=goog.dependencies_;for(var r in goog.included_)n.written[r]||t(r);for(var g=0;g<o.length;g++){var r=o[g];goog.dependencies_.written[r]=!0}var i=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(var s=!1,g=0;g<o.length;g++){var r=o[g];if(!r)throw goog.moduleLoaderState_=i,Error("Undefined script input");n.pathIsModule[r]?(s=!0,goog.importModule_(goog.basePath+r)):goog.importScript_(goog.basePath+r)}goog.moduleLoaderState_=i},goog.getPathFromDeps_=function(t){return t in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[t]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.typeOf=function(t){var o=typeof t;if("object"==o){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return o;var e=Object.prototype.toString.call(t);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof t.length&&"undefined"!=typeof t.splice&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||"undefined"!=typeof t.call&&"undefined"!=typeof t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==o&&"undefined"==typeof t.call)return"object";return o},goog.isNull=function(t){return null===t},goog.isDefAndNotNull=function(t){return null!=t},goog.isArray=function(t){return"array"==goog.typeOf(t)},goog.isArrayLike=function(t){var o=goog.typeOf(t);return"array"==o||"object"==o&&"number"==typeof t.length},goog.isDateLike=function(t){return goog.isObject(t)&&"function"==typeof t.getFullYear},goog.isString=function(t){return"string"==typeof t},goog.isBoolean=function(t){return"boolean"==typeof t},goog.isNumber=function(t){return"number"==typeof t},goog.isFunction=function(t){return"function"==goog.typeOf(t)},goog.isObject=function(t){var o=typeof t;return"object"==o&&null!=t||"function"==o},goog.getUid=function(t){return t[goog.UID_PROPERTY_]||(t[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(t){return!!t[goog.UID_PROPERTY_]},goog.removeUid=function(t){"removeAttribute"in t&&t.removeAttribute(goog.UID_PROPERTY_);try{delete t[goog.UID_PROPERTY_]}catch(o){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(t){var o=goog.typeOf(t);if("object"==o||"array"==o){if(t.clone)return t.clone();var e="array"==o?[]:{};for(var n in t)e[n]=goog.cloneObject(t[n]);return e}return t},goog.bindNative_=function(t,o,e){return t.call.apply(t.bind,arguments)},goog.bindJs_=function(t,o,e){if(!t)throw new Error;if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,n),t.apply(o,e)}}return function(){return t.apply(o,arguments)}},goog.bind=function(t,o,e){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t,o){var e=Array.prototype.slice.call(arguments,1);return function(){var o=e.slice();return o.push.apply(o,arguments),t.apply(this,o)}},goog.mixin=function(t,o){for(var e in o)t[e]=o[e]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(t){if(goog.global.execScript)goog.global.execScript(t,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(t);else{var o=goog.global.document,e=o.createElement("script");e.type="text/javascript",e.defer=!1,e.appendChild(o.createTextNode(t)),o.body.appendChild(e),o.body.removeChild(e)}}},goog.evalWorksForGlobals_=null,goog.cssNameMapping_,goog.cssNameMappingStyle_,goog.getCssName=function(t,o){var e,n=function(t){return goog.cssNameMapping_[t]||t},r=function(t){for(var o=t.split("-"),e=[],r=0;r<o.length;r++)e.push(n(o[r]));return e.join("-")};return e=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?n:r:function(t){return t},o?t+"-"+e(o):e(t)},goog.setCssNameMapping=function(t,o){goog.cssNameMapping_=t,goog.cssNameMappingStyle_=o},goog.global.CLOSURE_CSS_NAME_MAPPING,!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(t,o){return o&&(t=t.replace(/\{\$([^}]+)}/g,function(t,e){return e in o?o[e]:t})),t},goog.getMsgWithFallback=function(t,o){return t},goog.exportSymbol=function(t,o,e){goog.exportPath_(t,o,e)},goog.exportProperty=function(t,o,e){t[o]=e},goog.inherits=function(t,o){function e(){}e.prototype=o.prototype,t.superClass_=o.prototype,t.prototype=new e,t.prototype.constructor=t,t.base=function(t,e,n){var r=Array.prototype.slice.call(arguments,2);return o.prototype[e].apply(t,r)}},goog.base=function(t,o,e){var n=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!n)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(n.superClass_)return n.superClass_.constructor.apply(t,Array.prototype.slice.call(arguments,1));for(var r=Array.prototype.slice.call(arguments,2),g=!1,i=t.constructor;i;i=i.superClass_&&i.superClass_.constructor)if(i.prototype[o]===n)g=!0;else if(g)return i.prototype[o].apply(t,r);if(t[o]===n)return t.constructor.prototype[o].apply(t,r);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(t){t.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(t,o){var e=o.constructor,n=o.statics;e&&e!=Object.prototype.constructor||(e=function(){throw Error("cannot instantiate an interface (no constructor defined).")});var r=goog.defineClass.createSealingConstructor_(e,t);return t&&goog.inherits(r,t),delete o.constructor,delete o.statics,goog.defineClass.applyProperties_(r.prototype,o),null!=n&&(n instanceof Function?n(r):goog.defineClass.applyProperties_(r,n)),r},goog.defineClass.ClassDescriptor,goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG),goog.defineClass.createSealingConstructor_=function(t,o){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(o&&o.prototype&&o.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_])return t;var e=function(){var o=t.apply(this,arguments)||this;return o[goog.UID_PROPERTY_]=o[goog.UID_PROPERTY_],this.constructor===e&&Object.seal(o),o};return e}return t},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],goog.defineClass.applyProperties_=function(t,o){var e;for(e in o)Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e]);for(var n=0;n<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;n++)e=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[n],Object.prototype.hasOwnProperty.call(o,e)&&(t[e]=o[e])},goog.tagUnsealableClass=function(t){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(t.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.provide("goog.disposable.IDisposable"),goog.disposable.IDisposable=function(){},goog.disposable.IDisposable.prototype.dispose=goog.abstractMethod,goog.disposable.IDisposable.prototype.isDisposed=goog.abstractMethod,goog.provide("goog.Disposable"),goog.provide("goog.dispose"),goog.provide("goog.disposeAll"),goog.require("goog.disposable.IDisposable"),goog.Disposable=function(){goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF&&(goog.Disposable.INCLUDE_STACK_ON_CREATION&&(this.creationStack=(new Error).stack),goog.Disposable.instances_[goog.getUid(this)]=this),this.disposed_=this.disposed_,this.onDisposeCallbacks_=this.onDisposeCallbacks_},goog.Disposable.MonitoringMode={OFF:0,PERMANENT:1,INTERACTIVE:2},goog.define("goog.Disposable.MONITORING_MODE",0),goog.define("goog.Disposable.INCLUDE_STACK_ON_CREATION",!0),goog.Disposable.instances_={},goog.Disposable.getUndisposedObjects=function(){var t=[];for(var o in goog.Disposable.instances_)goog.Disposable.instances_.hasOwnProperty(o)&&t.push(goog.Disposable.instances_[Number(o)]);return t},goog.Disposable.clearUndisposedObjects=function(){goog.Disposable.instances_={}},goog.Disposable.prototype.disposed_=!1,goog.Disposable.prototype.onDisposeCallbacks_,goog.Disposable.prototype.creationStack,goog.Disposable.prototype.isDisposed=function(){return this.disposed_},goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed,goog.Disposable.prototype.dispose=function(){if(!this.disposed_&&(this.disposed_=!0,this.disposeInternal(),goog.Disposable.MONITORING_MODE!=goog.Disposable.MonitoringMode.OFF)){var t=goog.getUid(this);if(goog.Disposable.MONITORING_MODE==goog.Disposable.MonitoringMode.PERMANENT&&!goog.Disposable.instances_.hasOwnProperty(t))throw Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call");delete goog.Disposable.instances_[t]}},goog.Disposable.prototype.registerDisposable=function(t){this.addOnDisposeCallback(goog.partial(goog.dispose,t))},goog.Disposable.prototype.addOnDisposeCallback=function(t,o){this.onDisposeCallbacks_||(this.onDisposeCallbacks_=[]),this.onDisposeCallbacks_.push(goog.isDef(o)?goog.bind(t,o):t)},goog.Disposable.prototype.disposeInternal=function(){if(this.onDisposeCallbacks_)for(;this.onDisposeCallbacks_.length;)this.onDisposeCallbacks_.shift()()},goog.Disposable.isDisposed=function(t){return t&&"function"==typeof t.isDisposed?t.isDisposed():!1},goog.dispose=function(t){t&&"function"==typeof t.dispose&&t.dispose()},goog.disposeAll=function(t){for(var o=0,e=arguments.length;e>o;++o){var n=arguments[o];goog.isArrayLike(n)?goog.disposeAll.apply(null,n):goog.dispose(n)}},goog.provide("goog.events.EventId"),goog.events.EventId=function(t){this.id=t},goog.events.EventId.prototype.toString=function(){return this.id},goog.provide("goog.events.Event"),goog.provide("goog.events.EventLike"),goog.require("goog.Disposable"),goog.require("goog.events.EventId"),goog.events.EventLike,goog.events.Event=function(t,o){this.type=t instanceof goog.events.EventId?String(t):t,this.target=o,this.currentTarget=this.target,this.propagationStopped_=!1,this.defaultPrevented=!1,this.returnValue_=!0},goog.events.Event.prototype.disposeInternal=function(){},goog.events.Event.prototype.dispose=function(){},goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=!0},goog.events.Event.prototype.preventDefault=function(){this.defaultPrevented=!0,this.returnValue_=!1},goog.events.Event.stopPropagation=function(t){t.stopPropagation()},goog.events.Event.preventDefault=function(t){t.preventDefault()},goog.provide("goog.debug.Error"),goog.debug.Error=function(t){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var o=(new Error).stack;o&&(this.stack=o)}t&&(this.message=String(t))},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.provide("goog.dom.NodeType"),goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.provide("goog.string"),goog.provide("goog.string.Unicode"),goog.define("goog.string.DETECT_DOUBLE_ESCAPING",!1),goog.string.Unicode={NBSP:" "},goog.string.startsWith=function(t,o){return 0==t.lastIndexOf(o,0)},goog.string.endsWith=function(t,o){var e=t.length-o.length;return e>=0&&t.indexOf(o,e)==e},goog.string.caseInsensitiveStartsWith=function(t,o){return 0==goog.string.caseInsensitiveCompare(o,t.substr(0,o.length))},goog.string.caseInsensitiveEndsWith=function(t,o){return 0==goog.string.caseInsensitiveCompare(o,t.substr(t.length-o.length,o.length))},goog.string.caseInsensitiveEquals=function(t,o){return t.toLowerCase()==o.toLowerCase()},goog.string.subs=function(t,o){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&e.length>1;)n+=e.shift()+r.shift();return n+e.join("%s")},goog.string.collapseWhitespace=function(t){return t.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmpty=function(t){return/^[\s\xa0]*$/.test(t)},goog.string.isEmptySafe=function(t){return goog.string.isEmpty(goog.string.makeSafe(t))},goog.string.isBreakingWhitespace=function(t){return!/[^\t\n\r ]/.test(t)},goog.string.isAlpha=function(t){return!/[^a-zA-Z]/.test(t)},goog.string.isNumeric=function(t){return!/[^0-9]/.test(t)},goog.string.isAlphaNumeric=function(t){return!/[^a-zA-Z0-9]/.test(t)},goog.string.isSpace=function(t){return" "==t},goog.string.isUnicodeChar=function(t){return 1==t.length&&t>=" "&&"~">=t||t>=""&&"�">=t},goog.string.stripNewlines=function(t){return t.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(t){return t.replace(/(\r\n|\r|\n)/g,"\n")},goog.string.normalizeWhitespace=function(t){return t.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(t){return t.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(t){return t.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(t){return t.trim()}:function(t){return t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},goog.string.trimLeft=function(t){return t.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(t){return t.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=function(t,o){var e=String(t).toLowerCase(),n=String(o).toLowerCase();return n>e?-1:e==n?0:1},goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g,goog.string.numerateCompare=function(t,o){if(t==o)return 0;if(!t)return-1;if(!o)return 1;for(var e=t.toLowerCase().match(goog.string.numerateCompareRegExp_),n=o.toLowerCase().match(goog.string.numerateCompareRegExp_),r=Math.min(e.length,n.length),g=0;r>g;g++){var i=e[g],s=n[g];if(i!=s){var a=parseInt(i,10);if(!isNaN(a)){var l=parseInt(s,10);if(!isNaN(l)&&a-l)return a-l}return s>i?-1:1}}return e.length!=n.length?e.length-n.length:o>t?-1:1},goog.string.urlEncode=function(t){return encodeURIComponent(String(t))},goog.string.urlDecode=function(t){return decodeURIComponent(t.replace(/\+/g," "))},goog.string.newLineToBr=function(t,o){return t.replace(/(\r\n|\r|\n)/g,o?"<br />":"<br>")},goog.string.htmlEscape=function(t,o){return o?(t=t.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(t=t.replace(goog.string.E_RE_,"&#101;")),t):goog.string.ALL_RE_.test(t)?(-1!=t.indexOf("&")&&(t=t.replace(goog.string.AMP_RE_,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(goog.string.LT_RE_,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(goog.string.GT_RE_,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(goog.string.QUOT_RE_,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),-1!=t.indexOf("\x00")&&(t=t.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&-1!=t.indexOf("e")&&(t=t.replace(goog.string.E_RE_,"&#101;")),t):t},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.unescapeEntities=function(t){return goog.string.contains(t,"&")?"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(t):goog.string.unescapePureXmlEntities_(t):t},goog.string.unescapeEntitiesWithDocument=function(t,o){return goog.string.contains(t,"&")?goog.string.unescapeEntitiesUsingDom_(t,o):t},goog.string.unescapeEntitiesUsingDom_=function(t,o){var e,n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};return e=o?o.createElement("div"):goog.global.document.createElement("div"),t.replace(goog.string.HTML_ENTITY_PATTERN_,function(t,o){var r=n[t];if(r)return r;if("#"==o.charAt(0)){var g=Number("0"+o.substr(1));isNaN(g)||(r=String.fromCharCode(g))}return r||(e.innerHTML=t+" ",r=e.firstChild.nodeValue.slice(0,-1)),n[t]=r})},goog.string.unescapePureXmlEntities_=function(t){return t.replace(/&([^;]+);/g,function(t,o){switch(o){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:if("#"==o.charAt(0)){var e=Number("0"+o.substr(1));if(!isNaN(e))return String.fromCharCode(e)}return t}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(t,o){return goog.string.newLineToBr(t.replace(/  /g," &#160;"),o)},goog.string.preserveSpaces=function(t){return t.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(t,o){for(var e=o.length,n=0;e>n;n++){var r=1==e?o:o.charAt(n);if(t.charAt(0)==r&&t.charAt(t.length-1)==r)return t.substring(1,t.length-1)}return t},goog.string.truncate=function(t,o,e){return e&&(t=goog.string.unescapeEntities(t)),t.length>o&&(t=t.substring(0,o-3)+"..."),e&&(t=goog.string.htmlEscape(t)),t},goog.string.truncateMiddle=function(t,o,e,n){if(e&&(t=goog.string.unescapeEntities(t)),n&&t.length>o){n>o&&(n=o);var r=t.length-n,g=o-n;t=t.substring(0,g)+"..."+t.substring(r)}else if(t.length>o){var i=Math.floor(o/2),s=t.length-i;i+=o%2,t=t.substring(0,i)+"..."+t.substring(s)}return e&&(t=goog.string.htmlEscape(t)),t},goog.string.specialEscapeChars_={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\x0B",'"':'\\"',"\\":"\\\\"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(t){if(t=String(t),t.quote)return t.quote();for(var o=['"'],e=0;e<t.length;e++){var n=t.charAt(e),r=n.charCodeAt(0);o[e+1]=goog.string.specialEscapeChars_[n]||(r>31&&127>r?n:goog.string.escapeChar(n))}return o.push('"'),o.join("")},goog.string.escapeString=function(t){for(var o=[],e=0;e<t.length;e++)o[e]=goog.string.escapeChar(t.charAt(e));return o.join("")},goog.string.escapeChar=function(t){if(t in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[t];if(t in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[t]=goog.string.specialEscapeChars_[t];var o=t,e=t.charCodeAt(0);return e>31&&127>e?o=t:(256>e?(o="\\x",(16>e||e>256)&&(o+="0")):(o="\\u",4096>e&&(o+="0")),o+=e.toString(16).toUpperCase()),goog.string.jsEscapeCache_[t]=o},goog.string.contains=function(t,o){return-1!=t.indexOf(o)},goog.string.caseInsensitiveContains=function(t,o){return goog.string.contains(t.toLowerCase(),o.toLowerCase())},goog.string.countOf=function(t,o){return t&&o?t.split(o).length-1:0},goog.string.removeAt=function(t,o,e){var n=t;return o>=0&&o<t.length&&e>0&&(n=t.substr(0,o)+t.substr(o+e,t.length-o-e)),n},goog.string.remove=function(t,o){var e=new RegExp(goog.string.regExpEscape(o),"");return t.replace(e,"")},goog.string.removeAll=function(t,o){var e=new RegExp(goog.string.regExpEscape(o),"g");return t.replace(e,"")},goog.string.regExpEscape=function(t){return String(t).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=function(t,o){return new Array(o+1).join(t)},goog.string.padNumber=function(t,o,e){var n=goog.isDef(e)?t.toFixed(e):String(t),r=n.indexOf(".");return-1==r&&(r=n.length),goog.string.repeat("0",Math.max(0,o-r))+n},goog.string.makeSafe=function(t){return null==t?"":String(t)},goog.string.buildString=function(t){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){var t=2147483648;return Math.floor(Math.random()*t).toString(36)+Math.abs(Math.floor(Math.random()*t)^goog.now()).toString(36)},goog.string.compareVersions=function(t,o){for(var e=0,n=goog.string.trim(String(t)).split("."),r=goog.string.trim(String(o)).split("."),g=Math.max(n.length,r.length),i=0;0==e&&g>i;i++){var s=n[i]||"",a=r[i]||"",l=new RegExp("(\\d*)(\\D*)","g"),u=new RegExp("(\\d*)(\\D*)","g");do{var c=l.exec(s)||["","",""],p=u.exec(a)||["","",""];if(0==c[0].length&&0==p[0].length)break;var P=0==c[1].length?0:parseInt(c[1],10),h=0==p[1].length?0:parseInt(p[1],10);e=goog.string.compareElements_(P,h)||goog.string.compareElements_(0==c[2].length,0==p[2].length)||goog.string.compareElements_(c[2],p[2])}while(0==e)}return e},goog.string.compareElements_=function(t,o){return o>t?-1:t>o?1:0},goog.string.HASHCODE_MAX_=4294967296,goog.string.hashCode=function(t){for(var o=0,e=0;e<t.length;++e)o=31*o+t.charCodeAt(e),o%=goog.string.HASHCODE_MAX_;return o},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(t){var o=Number(t);return 0==o&&goog.string.isEmpty(t)?NaN:o},goog.string.isLowerCamelCase=function(t){return/^[a-z]+([A-Z][a-z]*)*$/.test(t)},goog.string.isUpperCamelCase=function(t){return/^([A-Z][a-z]*)+$/.test(t)},goog.string.toCamelCase=function(t){return String(t).replace(/\-([a-z])/g,function(t,o){return o.toUpperCase()})},goog.string.toSelectorCase=function(t){return String(t).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(t,o){var e=goog.isString(o)?goog.string.regExpEscape(o):"\\s";e=e?"|["+e+"]+":"";var n=new RegExp("(^"+e+")([a-z])","g");return t.replace(n,function(t,o,e){return o+e.toUpperCase()})},goog.string.parseInt=function(t){return isFinite(t)&&(t=String(t)),goog.isString(t)?/^\s*-?0x/i.test(t)?parseInt(t,16):parseInt(t,10):NaN},goog.string.splitLimit=function(t,o,e){for(var n=t.split(o),r=[];e>0&&n.length;)r.push(n.shift()),e--;return n.length&&r.push(n.join(o)),r},goog.provide("goog.asserts"),goog.provide("goog.asserts.AssertionError"),goog.require("goog.debug.Error"),goog.require("goog.dom.NodeType"),goog.require("goog.string"),goog.define("goog.asserts.ENABLE_ASSERTS",goog.DEBUG),goog.asserts.AssertionError=function(t,o){o.unshift(t),goog.debug.Error.call(this,goog.string.subs.apply(null,o)),o.shift(),this.messagePattern=t},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(t){throw t},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.doAssertFailure_=function(t,o,e,n){var r="Assertion failed";if(e){r+=": "+e;var g=n}else t&&(r+=": "+t,g=o);var i=new goog.asserts.AssertionError(""+r,g||[]);goog.asserts.errorHandler_(i)},goog.asserts.setErrorHandler=function(t){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=t)},goog.asserts.assert=function(t,o,e){return goog.asserts.ENABLE_ASSERTS&&!t&&goog.asserts.doAssertFailure_("",null,o,Array.prototype.slice.call(arguments,2)),t},goog.asserts.fail=function(t,o){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(t,o,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(t)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(t),t],o,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertString=function(t,o,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(t)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(t),t],o,Array.prototype.slice.call(arguments,2)),
t},goog.asserts.assertFunction=function(t,o,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(t)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(t),t],o,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertObject=function(t,o,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(t)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(t),t],o,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertArray=function(t,o,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(t)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(t),t],o,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertBoolean=function(t,o,e){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(t)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(t),t],o,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertElement=function(t,o,e){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(t)&&t.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(t),t],o,Array.prototype.slice.call(arguments,2)),t},goog.asserts.assertInstanceof=function(t,o,e,n){return!goog.asserts.ENABLE_ASSERTS||t instanceof o||goog.asserts.doAssertFailure_("instanceof check failed.",null,e,Array.prototype.slice.call(arguments,3)),t},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var t in Object.prototype)goog.asserts.fail(t+" should not be enumerable in Object.prototype.")},goog.provide("goog.array"),goog.provide("goog.array.ArrayLike"),goog.require("goog.asserts"),goog.define("goog.NATIVE_ARRAY_PROTOTYPES",goog.TRUSTED_SITE),goog.define("goog.array.ASSUME_NATIVE_FUNCTIONS",!1),goog.array.ArrayLike,goog.array.peek=function(t){return t[t.length-1]},goog.array.last=goog.array.peek,goog.array.ARRAY_PROTOTYPE_=Array.prototype,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.indexOf)?function(t,o,e){return goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.indexOf.call(t,o,e)}:function(t,o,e){var n=null==e?0:0>e?Math.max(0,t.length+e):e;if(goog.isString(t))return goog.isString(o)&&1==o.length?t.indexOf(o,n):-1;for(var r=n;r<t.length;r++)if(r in t&&t[r]===o)return r;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.lastIndexOf)?function(t,o,e){goog.asserts.assert(null!=t.length);var n=null==e?t.length-1:e;return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(t,o,n)}:function(t,o,e){var n=null==e?t.length-1:e;if(0>n&&(n=Math.max(0,t.length+n)),goog.isString(t))return goog.isString(o)&&1==o.length?t.lastIndexOf(o,n):-1;for(var r=n;r>=0;r--)if(r in t&&t[r]===o)return r;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.forEach)?function(t,o,e){goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.forEach.call(t,o,e)}:function(t,o,e){for(var n=t.length,r=goog.isString(t)?t.split(""):t,g=0;n>g;g++)g in r&&o.call(e,r[g],g,t)},goog.array.forEachRight=function(t,o,e){for(var n=t.length,r=goog.isString(t)?t.split(""):t,g=n-1;g>=0;--g)g in r&&o.call(e,r[g],g,t)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.filter)?function(t,o,e){return goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.filter.call(t,o,e)}:function(t,o,e){for(var n=t.length,r=[],g=0,i=goog.isString(t)?t.split(""):t,s=0;n>s;s++)if(s in i){var a=i[s];o.call(e,a,s,t)&&(r[g++]=a)}return r},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.map)?function(t,o,e){return goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.map.call(t,o,e)}:function(t,o,e){for(var n=t.length,r=new Array(n),g=goog.isString(t)?t.split(""):t,i=0;n>i;i++)i in g&&(r[i]=o.call(e,g[i],i,t));return r},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduce)?function(t,o,e,n){return goog.asserts.assert(null!=t.length),n&&(o=goog.bind(o,n)),goog.array.ARRAY_PROTOTYPE_.reduce.call(t,o,e)}:function(t,o,e,n){var r=e;return goog.array.forEach(t,function(e,g){r=o.call(n,r,e,g,t)}),r},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.reduceRight)?function(t,o,e,n){return goog.asserts.assert(null!=t.length),n&&(o=goog.bind(o,n)),goog.array.ARRAY_PROTOTYPE_.reduceRight.call(t,o,e)}:function(t,o,e,n){var r=e;return goog.array.forEachRight(t,function(e,g){r=o.call(n,r,e,g,t)}),r},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.some)?function(t,o,e){return goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.some.call(t,o,e)}:function(t,o,e){for(var n=t.length,r=goog.isString(t)?t.split(""):t,g=0;n>g;g++)if(g in r&&o.call(e,r[g],g,t))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||goog.array.ARRAY_PROTOTYPE_.every)?function(t,o,e){return goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.every.call(t,o,e)}:function(t,o,e){for(var n=t.length,r=goog.isString(t)?t.split(""):t,g=0;n>g;g++)if(g in r&&!o.call(e,r[g],g,t))return!1;return!0},goog.array.count=function(t,o,e){var n=0;return goog.array.forEach(t,function(t,r,g){o.call(e,t,r,g)&&++n},e),n},goog.array.find=function(t,o,e){var n=goog.array.findIndex(t,o,e);return 0>n?null:goog.isString(t)?t.charAt(n):t[n]},goog.array.findIndex=function(t,o,e){for(var n=t.length,r=goog.isString(t)?t.split(""):t,g=0;n>g;g++)if(g in r&&o.call(e,r[g],g,t))return g;return-1},goog.array.findRight=function(t,o,e){var n=goog.array.findIndexRight(t,o,e);return 0>n?null:goog.isString(t)?t.charAt(n):t[n]},goog.array.findIndexRight=function(t,o,e){for(var n=t.length,r=goog.isString(t)?t.split(""):t,g=n-1;g>=0;g--)if(g in r&&o.call(e,r[g],g,t))return g;return-1},goog.array.contains=function(t,o){return goog.array.indexOf(t,o)>=0},goog.array.isEmpty=function(t){return 0==t.length},goog.array.clear=function(t){if(!goog.isArray(t))for(var o=t.length-1;o>=0;o--)delete t[o];t.length=0},goog.array.insert=function(t,o){goog.array.contains(t,o)||t.push(o)},goog.array.insertAt=function(t,o,e){goog.array.splice(t,e,0,o)},goog.array.insertArrayAt=function(t,o,e){goog.partial(goog.array.splice,t,e,0).apply(null,o)},goog.array.insertBefore=function(t,o,e){var n;2==arguments.length||(n=goog.array.indexOf(t,e))<0?t.push(o):goog.array.insertAt(t,o,n)},goog.array.remove=function(t,o){var e,n=goog.array.indexOf(t,o);return(e=n>=0)&&goog.array.removeAt(t,n),e},goog.array.removeAt=function(t,o){return goog.asserts.assert(null!=t.length),1==goog.array.ARRAY_PROTOTYPE_.splice.call(t,o,1).length},goog.array.removeIf=function(t,o,e){var n=goog.array.findIndex(t,o,e);return n>=0?(goog.array.removeAt(t,n),!0):!1},goog.array.removeAllIf=function(t,o,e){var n=0;return goog.array.forEachRight(t,function(r,g){o.call(e,r,g,t)&&goog.array.removeAt(t,g)&&n++}),n},goog.array.concat=function(t){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)},goog.array.join=function(t){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)},goog.array.toArray=function(t){var o=t.length;if(o>0){for(var e=new Array(o),n=0;o>n;n++)e[n]=t[n];return e}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(t,o){for(var e=1;e<arguments.length;e++){var n,r=arguments[e];if(goog.isArray(r)||(n=goog.isArrayLike(r))&&Object.prototype.hasOwnProperty.call(r,"callee"))t.push.apply(t,r);else if(n)for(var g=t.length,i=r.length,s=0;i>s;s++)t[g+s]=r[s];else t.push(r)}},goog.array.splice=function(t,o,e,n){return goog.asserts.assert(null!=t.length),goog.array.ARRAY_PROTOTYPE_.splice.apply(t,goog.array.slice(arguments,1))},goog.array.slice=function(t,o,e){return goog.asserts.assert(null!=t.length),arguments.length<=2?goog.array.ARRAY_PROTOTYPE_.slice.call(t,o):goog.array.ARRAY_PROTOTYPE_.slice.call(t,o,e)},goog.array.removeDuplicates=function(t,o,e){for(var n=o||t,r=function(t){return goog.isObject(l)?"o"+goog.getUid(l):(typeof l).charAt(0)+l},g=e||r,i={},s=0,a=0;a<t.length;){var l=t[a++],u=g(l);Object.prototype.hasOwnProperty.call(i,u)||(i[u]=!0,n[s++]=l)}n.length=s},goog.array.binarySearch=function(t,o,e){return goog.array.binarySearch_(t,e||goog.array.defaultCompare,!1,o)},goog.array.binarySelect=function(t,o,e){return goog.array.binarySearch_(t,o,!0,void 0,e)},goog.array.binarySearch_=function(t,o,e,n,r){for(var g,i=0,s=t.length;s>i;){var a,l=i+s>>1;a=e?o.call(r,t[l],l,t):o(n,t[l]),a>0?i=l+1:(s=l,g=!a)}return g?i:~i},goog.array.sort=function(t,o){t.sort(o||goog.array.defaultCompare)},goog.array.stableSort=function(t,o){function e(t,o){return r(t.value,o.value)||t.index-o.index}for(var n=0;n<t.length;n++)t[n]={index:n,value:t[n]};var r=o||goog.array.defaultCompare;goog.array.sort(t,e);for(var n=0;n<t.length;n++)t[n]=t[n].value},goog.array.sortByKey=function(t,o,e){var n=e||goog.array.defaultCompare;goog.array.sort(t,function(t,e){return n(o(t),o(e))})},goog.array.sortObjectsByKey=function(t,o,e){goog.array.sortByKey(t,function(t){return t[o]},e)},goog.array.isSorted=function(t,o,e){for(var n=o||goog.array.defaultCompare,r=1;r<t.length;r++){var g=n(t[r-1],t[r]);if(g>0||0==g&&e)return!1}return!0},goog.array.equals=function(t,o,e){if(!goog.isArrayLike(t)||!goog.isArrayLike(o)||t.length!=o.length)return!1;for(var n=t.length,r=e||goog.array.defaultCompareEquality,g=0;n>g;g++)if(!r(t[g],o[g]))return!1;return!0},goog.array.compare3=function(t,o,e){for(var n=e||goog.array.defaultCompare,r=Math.min(t.length,o.length),g=0;r>g;g++){var i=n(t[g],o[g]);if(0!=i)return i}return goog.array.defaultCompare(t.length,o.length)},goog.array.defaultCompare=function(t,o){return t>o?1:o>t?-1:0},goog.array.defaultCompareEquality=function(t,o){return t===o},goog.array.binaryInsert=function(t,o,e){var n=goog.array.binarySearch(t,o,e);return 0>n?(goog.array.insertAt(t,o,-(n+1)),!0):!1},goog.array.binaryRemove=function(t,o,e){var n=goog.array.binarySearch(t,o,e);return n>=0?goog.array.removeAt(t,n):!1},goog.array.bucket=function(t,o,e){for(var n={},r=0;r<t.length;r++){var g=t[r],i=o.call(e,g,r,t);if(goog.isDef(i)){var s=n[i]||(n[i]=[]);s.push(g)}}return n},goog.array.toObject=function(t,o,e){var n={};return goog.array.forEach(t,function(r,g){n[o.call(e,r,g,t)]=r}),n},goog.array.range=function(t,o,e){var n=[],r=0,g=t,i=e||1;if(void 0!==o&&(r=t,g=o),0>i*(g-r))return[];if(i>0)for(var s=r;g>s;s+=i)n.push(s);else for(var s=r;s>g;s+=i)n.push(s);return n},goog.array.repeat=function(t,o){for(var e=[],n=0;o>n;n++)e[n]=t;return e},goog.array.flatten=function(t){for(var o=[],e=0;e<arguments.length;e++){var n=arguments[e];goog.isArray(n)?o.push.apply(o,goog.array.flatten.apply(null,n)):o.push(n)}return o},goog.array.rotate=function(t,o){return goog.asserts.assert(null!=t.length),t.length&&(o%=t.length,o>0?goog.array.ARRAY_PROTOTYPE_.unshift.apply(t,t.splice(-o,o)):0>o&&goog.array.ARRAY_PROTOTYPE_.push.apply(t,t.splice(0,-o))),t},goog.array.moveItem=function(t,o,e){goog.asserts.assert(o>=0&&o<t.length),goog.asserts.assert(e>=0&&e<t.length);var n=goog.array.ARRAY_PROTOTYPE_.splice.call(t,o,1);goog.array.ARRAY_PROTOTYPE_.splice.call(t,e,0,n[0])},goog.array.zip=function(t){if(!arguments.length)return[];for(var o=[],e=0;!0;e++){for(var n=[],r=0;r<arguments.length;r++){var g=arguments[r];if(e>=g.length)return o;n.push(g[e])}o.push(n)}},goog.array.shuffle=function(t,o){for(var e=o||Math.random,n=t.length-1;n>0;n--){var r=Math.floor(e()*(n+1)),g=t[n];t[n]=t[r],t[r]=g}},goog.provide("goog.object"),goog.require("goog.array"),goog.object.forEach=function(t,o,e){for(var n in t)o.call(e,t[n],n,t)},goog.object.filter=function(t,o,e){var n={};for(var r in t)o.call(e,t[r],r,t)&&(n[r]=t[r]);return n},goog.object.map=function(t,o,e){var n={};for(var r in t)n[r]=o.call(e,t[r],r,t);return n},goog.object.some=function(t,o,e){for(var n in t)if(o.call(e,t[n],n,t))return!0;return!1},goog.object.every=function(t,o,e){for(var n in t)if(!o.call(e,t[n],n,t))return!1;return!0},goog.object.getCount=function(t){var o=0;for(var e in t)o++;return o},goog.object.getAnyKey=function(t){for(var o in t)return o},goog.object.getAnyValue=function(t){for(var o in t)return t[o]},goog.object.contains=function(t,o){return goog.object.containsValue(t,o)},goog.object.getValues=function(t){var o=[],e=0;for(var n in t)o[e++]=t[n];return o},goog.object.getKeys=function(t){var o=[],e=0;for(var n in t)o[e++]=n;return o},goog.object.getValueByKeys=function(t,o){for(var e=goog.isArrayLike(o),n=e?o:arguments,r=e?0:1;r<n.length&&(t=t[n[r]],goog.isDef(t));r++);return t},goog.object.containsKey=function(t,o){return o in t},goog.object.containsValue=function(t,o){for(var e in t)if(t[e]==o)return!0;return!1},goog.object.findKey=function(t,o,e){for(var n in t)if(o.call(e,t[n],n,t))return n;return void 0},goog.object.findValue=function(t,o,e){var n=goog.object.findKey(t,o,e);return n&&t[n]},goog.object.isEmpty=function(t){for(var o in t)return!1;return!0},goog.object.clear=function(t){for(var o in t)delete t[o]},goog.object.remove=function(t,o){var e;return(e=o in t)&&delete t[o],e},goog.object.add=function(t,o,e){if(o in t)throw Error('The object already contains the key "'+o+'"');goog.object.set(t,o,e)},goog.object.get=function(t,o,e){return o in t?t[o]:e},goog.object.set=function(t,o,e){t[o]=e},goog.object.setIfUndefined=function(t,o,e){return o in t?t[o]:t[o]=e},goog.object.equals=function(t,o){if(!goog.array.equals(goog.object.getKeys(t),goog.object.getKeys(o)))return!1;for(var e in t)if(t[e]!==o[e])return!1;return!0},goog.object.clone=function(t){var o={};for(var e in t)o[e]=t[e];return o},goog.object.unsafeClone=function(t){var o=goog.typeOf(t);if("object"==o||"array"==o){if(t.clone)return t.clone();var e="array"==o?[]:{};for(var n in t)e[n]=goog.object.unsafeClone(t[n]);return e}return t},goog.object.transpose=function(t){var o={};for(var e in t)o[t[e]]=e;return o},goog.object.PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],goog.object.extend=function(t,o){for(var e,n,r=1;r<arguments.length;r++){n=arguments[r];for(e in n)t[e]=n[e];for(var g=0;g<goog.object.PROTOTYPE_FIELDS_.length;g++)e=goog.object.PROTOTYPE_FIELDS_[g],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}},goog.object.create=function(t){var o=arguments.length;if(1==o&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(o%2)throw Error("Uneven number of arguments");for(var e={},n=0;o>n;n+=2)e[arguments[n]]=arguments[n+1];return e},goog.object.createSet=function(t){var o=arguments.length;if(1==o&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var e={},n=0;o>n;n++)e[arguments[n]]=!0;return e},goog.object.createImmutableView=function(t){var o=t;return Object.isFrozen&&!Object.isFrozen(t)&&(o=Object.create(t),Object.freeze(o)),o},goog.object.isImmutableView=function(t){return!!Object.isFrozen&&Object.isFrozen(t)},goog.provide("goog.labs.userAgent.util"),goog.require("goog.string"),goog.labs.userAgent.util.getNativeUserAgentString_=function(){var t=goog.labs.userAgent.util.getNavigator_();if(t){var o=t.userAgent;if(o)return o}return""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(t){goog.labs.userAgent.util.userAgent_=t||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(t){var o=goog.labs.userAgent.util.getUserAgent();return goog.string.contains(o,t)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(t){var o=goog.labs.userAgent.util.getUserAgent();return goog.string.caseInsensitiveContains(o,t)},goog.labs.userAgent.util.extractVersionTuples=function(t){for(var o,e=new RegExp("(\\w[\\w ]+)/([^\\s]+)\\s*(?:\\((.*?)\\))?","g"),n=[];o=e.exec(t);)n.push([o[1],o[2],o[3]||void 0]);return n},goog.provide("goog.labs.userAgent.browser"),goog.require("goog.array"),goog.require("goog.labs.userAgent.util"),goog.require("goog.object"),goog.require("goog.string"),goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")||goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!goog.labs.userAgent.util.matchUserAgent("Chrome")&&!goog.labs.userAgent.util.matchUserAgent("CriOS")&&!goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.browser.matchChrome_=function(){return goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS")},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return!goog.labs.userAgent.browser.isChrome()&&goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function t(t){var o=goog.array.find(t,r);return n[o]||""}var o=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(o);var e=goog.labs.userAgent.util.extractVersionTuples(o),n={};goog.array.forEach(e,function(t){var o=t[0],e=t[1];n[o]=e});var r=goog.partial(goog.object.containsKey,n);if(goog.labs.userAgent.browser.isOpera())return t(["Version","Opera","OPR"]);if(goog.labs.userAgent.browser.isChrome())return t(["Chrome","CriOS"]);var g=e[2];return g&&g[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(t){return goog.string.compareVersions(goog.labs.userAgent.browser.getVersion(),t)>=0},goog.labs.userAgent.browser.getIEVersion_=function(t){var o=/rv: *([\d\.]*)/.exec(t);if(o&&o[1])return o[1];var e="",n=/MSIE +([\d\.]+)/.exec(t);if(n&&n[1]){var r=/Trident\/(\d.\d)/.exec(t);if("7.0"==n[1])if(r&&r[1])switch(r[1]){case"4.0":e="8.0";break;case"5.0":e="9.0";break;case"6.0":e="10.0";break;case"7.0":e="11.0"}else e="7.0";else e=n[1]}return e},goog.provide("goog.labs.userAgent.engine"),goog.require("goog.array"),goog.require("goog.labs.userAgent.util"),goog.require("goog.string"),goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()},goog.labs.userAgent.engine.getVersion=function(){var t=goog.labs.userAgent.util.getUserAgent();if(t){var o=goog.labs.userAgent.util.extractVersionTuples(t),e=o[1];if(e)return"Gecko"==e[0]?goog.labs.userAgent.engine.getVersionForKey_(o,"Firefox"):e[1];var n,r=o[0];if(r&&(n=r[2])){var g=/Trident\/([^\s;]+)/.exec(n);if(g)return g[1]}}return""},goog.labs.userAgent.engine.isVersionOrHigher=function(t){return goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),t)>=0},goog.labs.userAgent.engine.getVersionForKey_=function(t,o){var e=goog.array.find(t,function(t){return o==t[0]});return e&&e[1]||""},goog.provide("goog.reflect"),goog.reflect.object=function(t,o){return o},goog.reflect.sinkValue=function(t){return goog.reflect.sinkValue[" "](t),t},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(t,o){try{return goog.reflect.sinkValue(t[o]),!0}catch(e){}return!1},goog.provide("goog.userAgent"),goog.require("goog.labs.userAgent.browser"),goog.require("goog.labs.userAgent.engine"),goog.require("goog.labs.userAgent.util"),goog.require("goog.string"),goog.define("goog.userAgent.ASSUME_IE",!1),goog.define("goog.userAgent.ASSUME_GECKO",!1),goog.define("goog.userAgent.ASSUME_WEBKIT",!1),goog.define("goog.userAgent.ASSUME_MOBILE_WEBKIT",!1),goog.define("goog.userAgent.ASSUME_OPERA",!1),goog.define("goog.userAgent.ASSUME_ANY_VERSION",!1),goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigator=function(){return goog.global.navigator||null},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var t=goog.userAgent.getNavigator();return t&&t.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.define("goog.userAgent.ASSUME_MAC",!1),goog.define("goog.userAgent.ASSUME_WINDOWS",!1),goog.define("goog.userAgent.ASSUME_LINUX",!1),goog.define("goog.userAgent.ASSUME_X11",!1),goog.define("goog.userAgent.ASSUME_ANDROID",!1),goog.define("goog.userAgent.ASSUME_IPHONE",!1),goog.define("goog.userAgent.ASSUME_IPAD",!1),goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD,goog.userAgent.initPlatform_=function(){goog.userAgent.detectedMac_=goog.string.contains(goog.userAgent.PLATFORM,"Mac"),goog.userAgent.detectedWindows_=goog.string.contains(goog.userAgent.PLATFORM,"Win"),goog.userAgent.detectedLinux_=goog.string.contains(goog.userAgent.PLATFORM,"Linux"),goog.userAgent.detectedX11_=!!goog.userAgent.getNavigator()&&goog.string.contains(goog.userAgent.getNavigator().appVersion||"","X11");var t=goog.userAgent.getUserAgentString();goog.userAgent.detectedAndroid_=!!t&&goog.string.contains(t,"Android"),goog.userAgent.detectedIPhone_=!!t&&goog.string.contains(t,"iPhone"),goog.userAgent.detectedIPad_=!!t&&goog.string.contains(t,"iPad")},goog.userAgent.PLATFORM_KNOWN_||goog.userAgent.initPlatform_(),goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.userAgent.detectedMac_,goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.userAgent.detectedWindows_,goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.detectedLinux_,goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.detectedX11_,goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.userAgent.detectedAndroid_,goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.userAgent.detectedIPhone_,goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.userAgent.detectedIPad_,goog.userAgent.determineVersion_=function(){var t,o="";if(goog.userAgent.OPERA&&goog.global.opera){var e=goog.global.opera.version;return goog.isFunction(e)?e():e}if(goog.userAgent.GECKO?t=/rv\:([^\);]+)(\)|;)/:goog.userAgent.IE?t=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:goog.userAgent.WEBKIT&&(t=/WebKit\/(\S+)/),t){var n=t.exec(goog.userAgent.getUserAgentString());o=n?n[1]:""}if(goog.userAgent.IE){var r=goog.userAgent.getDocumentMode_();if(r>parseFloat(o))return String(r)}return o},goog.userAgent.getDocumentMode_=function(){var t=goog.global.document;return t?t.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(t,o){return goog.string.compareVersions(t,o)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(t){return goog.userAgent.ASSUME_ANY_VERSION||goog.userAgent.isVersionOrHigherCache_[t]||(goog.userAgent.isVersionOrHigherCache_[t]=goog.string.compareVersions(goog.userAgent.VERSION,t)>=0)},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(t){return goog.userAgent.IE&&goog.userAgent.DOCUMENT_MODE>=t},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){var t=goog.global.document;if(!t||!goog.userAgent.IE)return void 0;var o=goog.userAgent.getDocumentMode_();return o||("CSS1Compat"==t.compatMode?parseInt(goog.userAgent.VERSION,10):5)}(),goog.provide("goog.events.EventType"),goog.require("goog.userAgent"),goog.events.getVendorPrefixedName_=function(t){return goog.userAgent.WEBKIT?"webkit"+t:goog.userAgent.OPERA?"o"+t.toLowerCase():t.toLowerCase()},goog.events.EventType={CLICK:"click",RIGHTCLICK:"rightclick",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEWHEEL:goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel",SELECTSTART:"selectstart",WHEEL:"wheel",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",DRAGEND:"dragend",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",BEFOREUNLOAD:"beforeunload",CONSOLEMESSAGE:"consolemessage",CONTEXTMENU:"contextmenu",DOMCONTENTLOADED:"DOMContentLoaded",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",ORIENTATIONCHANGE:"orientationchange",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",PAGEHIDE:"pagehide",PAGESHOW:"pageshow",POPSTATE:"popstate",COPY:"copy",PASTE:"paste",CUT:"cut",BEFORECOPY:"beforecopy",BEFORECUT:"beforecut",BEFOREPASTE:"beforepaste",ONLINE:"online",OFFLINE:"offline",MESSAGE:"message",CONNECT:"connect",ANIMATIONSTART:goog.events.getVendorPrefixedName_("AnimationStart"),ANIMATIONEND:goog.events.getVendorPrefixedName_("AnimationEnd"),ANIMATIONITERATION:goog.events.getVendorPrefixedName_("AnimationIteration"),TRANSITIONEND:goog.events.getVendorPrefixedName_("TransitionEnd"),POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTERCANCEL:"pointercancel",POINTERMOVE:"pointermove",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",MSGESTURECHANGE:"MSGestureChange",MSGESTUREEND:"MSGestureEnd",MSGESTUREHOLD:"MSGestureHold",MSGESTURESTART:"MSGestureStart",MSGESTURETAP:"MSGestureTap",MSGOTPOINTERCAPTURE:"MSGotPointerCapture",MSINERTIASTART:"MSInertiaStart",MSLOSTPOINTERCAPTURE:"MSLostPointerCapture",MSPOINTERCANCEL:"MSPointerCancel",MSPOINTERDOWN:"MSPointerDown",MSPOINTERENTER:"MSPointerEnter",MSPOINTERHOVER:"MSPointerHover",MSPOINTERLEAVE:"MSPointerLeave",MSPOINTERMOVE:"MSPointerMove",MSPOINTEROUT:"MSPointerOut",MSPOINTEROVER:"MSPointerOver",MSPOINTERUP:"MSPointerUp",TEXTINPUT:"textinput",COMPOSITIONSTART:"compositionstart",COMPOSITIONUPDATE:"compositionupdate",COMPOSITIONEND:"compositionend",EXIT:"exit",LOADABORT:"loadabort",LOADCOMMIT:"loadcommit",LOADREDIRECT:"loadredirect",LOADSTART:"loadstart",LOADSTOP:"loadstop",RESPONSIVE:"responsive",SIZECHANGED:"sizechanged",UNRESPONSIVE:"unresponsive",VISIBILITYCHANGE:"visibilitychange",STORAGE:"storage",DOMSUBTREEMODIFIED:"DOMSubtreeModified",DOMNODEINSERTED:"DOMNodeInserted",DOMNODEREMOVED:"DOMNodeRemoved",DOMNODEREMOVEDFROMDOCUMENT:"DOMNodeRemovedFromDocument",DOMNODEINSERTEDINTODOCUMENT:"DOMNodeInsertedIntoDocument",DOMATTRMODIFIED:"DOMAttrModified",DOMCHARACTERDATAMODIFIED:"DOMCharacterDataModified"},goog.provide("goog.events.BrowserFeature"),goog.require("goog.userAgent"),goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),HAS_W3C_EVENT_SUPPORT:!goog.userAgent.IE||goog.userAgent.isDocumentModeOrHigher(9),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),HAS_NAVIGATOR_ONLINE_PROPERTY:!goog.userAgent.WEBKIT||goog.userAgent.isVersionOrHigher("528"),HAS_HTML5_NETWORK_EVENT_SUPPORT:goog.userAgent.GECKO&&goog.userAgent.isVersionOrHigher("1.9b")||goog.userAgent.IE&&goog.userAgent.isVersionOrHigher("8")||goog.userAgent.OPERA&&goog.userAgent.isVersionOrHigher("9.5")||goog.userAgent.WEBKIT&&goog.userAgent.isVersionOrHigher("528"),HTML5_NETWORK_EVENTS_FIRE_ON_BODY:goog.userAgent.GECKO&&!goog.userAgent.isVersionOrHigher("8")||goog.userAgent.IE&&!goog.userAgent.isVersionOrHigher("9"),TOUCH_ENABLED:"ontouchstart"in goog.global||!!(goog.global.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!goog.global.navigator||!goog.global.navigator.msMaxTouchPoints)},goog.provide("goog.events.BrowserEvent"),goog.provide("goog.events.BrowserEvent.MouseButton"),goog.require("goog.events.BrowserFeature"),goog.require("goog.events.Event"),goog.require("goog.events.EventType"),goog.require("goog.reflect"),goog.require("goog.userAgent"),goog.events.BrowserEvent=function(t,o){goog.events.BrowserEvent.base(this,"constructor",t?t.type:""),this.target=null,this.currentTarget=null,this.relatedTarget=null,this.offsetX=0,this.offsetY=0,this.clientX=0,this.clientY=0,this.screenX=0,this.screenY=0,this.button=0,this.keyCode=0,this.charCode=0,this.ctrlKey=!1,this.altKey=!1,this.shiftKey=!1,this.metaKey=!1,this.state=null,this.platformModifierKey=!1,this.event_=null,t&&this.init(t,o)},goog.inherits(goog.events.BrowserEvent,goog.events.Event),goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2},goog.events.BrowserEvent.IEButtonMap=[1,4,2],goog.events.BrowserEvent.prototype.init=function(t,o){var e=this.type=t.type;this.target=t.target||t.srcElement,this.currentTarget=o;var n=t.relatedTarget;n?goog.userAgent.GECKO&&(goog.reflect.canAccessProperty(n,"nodeName")||(n=null)):e==goog.events.EventType.MOUSEOVER?n=t.fromElement:e==goog.events.EventType.MOUSEOUT&&(n=t.toElement),this.relatedTarget=n,this.offsetX=goog.userAgent.WEBKIT||void 0!==t.offsetX?t.offsetX:t.layerX,this.offsetY=goog.userAgent.WEBKIT||void 0!==t.offsetY?t.offsetY:t.layerY,this.clientX=void 0!==t.clientX?t.clientX:t.pageX,
this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0,this.button=t.button,this.keyCode=t.keyCode||0,this.charCode=t.charCode||("keypress"==e?t.keyCode:0),this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.platformModifierKey=goog.userAgent.MAC?t.metaKey:t.ctrlKey,this.state=t.state,this.event_=t,t.defaultPrevented&&this.preventDefault()},goog.events.BrowserEvent.prototype.isButton=function(t){return goog.events.BrowserFeature.HAS_W3C_BUTTON?this.event_.button==t:"click"==this.type?t==goog.events.BrowserEvent.MouseButton.LEFT:!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap[t])},goog.events.BrowserEvent.prototype.isMouseActionButton=function(){return this.isButton(goog.events.BrowserEvent.MouseButton.LEFT)&&!(goog.userAgent.WEBKIT&&goog.userAgent.MAC&&this.ctrlKey)},goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this),this.event_.stopPropagation?this.event_.stopPropagation():this.event_.cancelBubble=!0},goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var t=this.event_;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{var o=112,e=123;(t.ctrlKey||t.keyCode>=o&&t.keyCode<=e)&&(t.keyCode=-1)}catch(n){}},goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_},goog.events.BrowserEvent.prototype.disposeInternal=function(){},goog.provide("goog.debug.EntryPointMonitor"),goog.provide("goog.debug.entryPointRegistry"),goog.require("goog.asserts"),goog.debug.EntryPointMonitor=function(){},goog.debug.EntryPointMonitor.prototype.wrap,goog.debug.EntryPointMonitor.prototype.unwrap,goog.debug.entryPointRegistry.refList_=[],goog.debug.entryPointRegistry.monitors_=[],goog.debug.entryPointRegistry.monitorsMayExist_=!1,goog.debug.entryPointRegistry.register=function(t){if(goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=t,goog.debug.entryPointRegistry.monitorsMayExist_)for(var o=goog.debug.entryPointRegistry.monitors_,e=0;e<o.length;e++)t(goog.bind(o[e].wrap,o[e]))},goog.debug.entryPointRegistry.monitorAll=function(t){goog.debug.entryPointRegistry.monitorsMayExist_=!0;for(var o=goog.bind(t.wrap,t),e=0;e<goog.debug.entryPointRegistry.refList_.length;e++)goog.debug.entryPointRegistry.refList_[e](o);goog.debug.entryPointRegistry.monitors_.push(t)},goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(t){var o=goog.debug.entryPointRegistry.monitors_;goog.asserts.assert(t==o[o.length-1],"Only the most recent monitor can be unwrapped.");for(var e=goog.bind(t.unwrap,t),n=0;n<goog.debug.entryPointRegistry.refList_.length;n++)goog.debug.entryPointRegistry.refList_[n](e);o.length--},goog.provide("goog.events.Listenable"),goog.provide("goog.events.ListenableKey"),goog.require("goog.events.EventId"),goog.events.Listenable=function(){},goog.events.Listenable.IMPLEMENTED_BY_PROP="closure_listenable_"+(1e6*Math.random()|0),goog.events.Listenable.addImplementation=function(t){t.prototype[goog.events.Listenable.IMPLEMENTED_BY_PROP]=!0},goog.events.Listenable.isImplementedBy=function(t){return!(!t||!t[goog.events.Listenable.IMPLEMENTED_BY_PROP])},goog.events.Listenable.prototype.listen,goog.events.Listenable.prototype.listenOnce,goog.events.Listenable.prototype.unlisten,goog.events.Listenable.prototype.unlistenByKey,goog.events.Listenable.prototype.dispatchEvent,goog.events.Listenable.prototype.removeAllListeners,goog.events.Listenable.prototype.getParentEventTarget,goog.events.Listenable.prototype.fireListeners,goog.events.Listenable.prototype.getListeners,goog.events.Listenable.prototype.getListener,goog.events.Listenable.prototype.hasListener,goog.events.ListenableKey=function(){},goog.events.ListenableKey.counter_=0,goog.events.ListenableKey.reserveKey=function(){return++goog.events.ListenableKey.counter_},goog.events.ListenableKey.prototype.src,goog.events.ListenableKey.prototype.type,goog.events.ListenableKey.prototype.listener,goog.events.ListenableKey.prototype.capture,goog.events.ListenableKey.prototype.handler,goog.events.ListenableKey.prototype.key,goog.provide("goog.events.Listener"),goog.require("goog.events.ListenableKey"),goog.events.Listener=function(t,o,e,n,r,g){goog.events.Listener.ENABLE_MONITORING&&(this.creationStack=(new Error).stack),this.listener=t,this.proxy=o,this.src=e,this.type=n,this.capture=!!r,this.handler=g,this.key=goog.events.ListenableKey.reserveKey(),this.callOnce=!1,this.removed=!1},goog.define("goog.events.Listener.ENABLE_MONITORING",!1),goog.events.Listener.prototype.creationStack,goog.events.Listener.prototype.markAsRemoved=function(){this.removed=!0,this.listener=null,this.proxy=null,this.src=null,this.handler=null},goog.provide("goog.events.ListenerMap"),goog.require("goog.array"),goog.require("goog.events.Listener"),goog.require("goog.object"),goog.events.ListenerMap=function(t){this.src=t,this.listeners={},this.typeCount_=0},goog.events.ListenerMap.prototype.getTypeCount=function(){return this.typeCount_},goog.events.ListenerMap.prototype.getListenerCount=function(){var t=0;for(var o in this.listeners)t+=this.listeners[o].length;return t},goog.events.ListenerMap.prototype.add=function(t,o,e,n,r){var g=t.toString(),i=this.listeners[g];i||(i=this.listeners[g]=[],this.typeCount_++);var s,a=goog.events.ListenerMap.findListenerIndex_(i,o,n,r);return a>-1?(s=i[a],e||(s.callOnce=!1)):(s=new goog.events.Listener(o,null,this.src,g,!!n,r),s.callOnce=e,i.push(s)),s},goog.events.ListenerMap.prototype.remove=function(t,o,e,n){var r=t.toString();if(!(r in this.listeners))return!1;var g=this.listeners[r],i=goog.events.ListenerMap.findListenerIndex_(g,o,e,n);if(i>-1){var s=g[i];return s.markAsRemoved(),goog.array.removeAt(g,i),0==g.length&&(delete this.listeners[r],this.typeCount_--),!0}return!1},goog.events.ListenerMap.prototype.removeByKey=function(t){var o=t.type;if(!(o in this.listeners))return!1;var e=goog.array.remove(this.listeners[o],t);return e&&(t.markAsRemoved(),0==this.listeners[o].length&&(delete this.listeners[o],this.typeCount_--)),e},goog.events.ListenerMap.prototype.removeAll=function(t){var o=t&&t.toString(),e=0;for(var n in this.listeners)if(!o||n==o){for(var r=this.listeners[n],g=0;g<r.length;g++)++e,r[g].markAsRemoved();delete this.listeners[n],this.typeCount_--}return e},goog.events.ListenerMap.prototype.getListeners=function(t,o){var e=this.listeners[t.toString()],n=[];if(e)for(var r=0;r<e.length;++r){var g=e[r];g.capture==o&&n.push(g)}return n},goog.events.ListenerMap.prototype.getListener=function(t,o,e,n){var r=this.listeners[t.toString()],g=-1;return r&&(g=goog.events.ListenerMap.findListenerIndex_(r,o,e,n)),g>-1?r[g]:null},goog.events.ListenerMap.prototype.hasListener=function(t,o){var e=goog.isDef(t),n=e?t.toString():"",r=goog.isDef(o);return goog.object.some(this.listeners,function(t,g){for(var i=0;i<t.length;++i)if(!(e&&t[i].type!=n||r&&t[i].capture!=o))return!0;return!1})},goog.events.ListenerMap.findListenerIndex_=function(t,o,e,n){for(var r=0;r<t.length;++r){var g=t[r];if(!g.removed&&g.listener==o&&g.capture==!!e&&g.handler==n)return r}return-1},goog.provide("goog.events"),goog.provide("goog.events.CaptureSimulationMode"),goog.provide("goog.events.Key"),goog.provide("goog.events.ListenableType"),goog.require("goog.asserts"),goog.require("goog.debug.entryPointRegistry"),goog.require("goog.events.BrowserEvent"),goog.require("goog.events.BrowserFeature"),goog.require("goog.events.Listenable"),goog.require("goog.events.ListenerMap"),goog.forwardDeclare("goog.debug.ErrorHandler"),goog.forwardDeclare("goog.events.EventWrapper"),goog.events.Key,goog.events.ListenableType,goog.events.LISTENER_MAP_PROP_="closure_lm_"+(1e6*Math.random()|0),goog.events.onString_="on",goog.events.onStringMap_={},goog.events.CaptureSimulationMode={OFF_AND_FAIL:0,OFF_AND_SILENT:1,ON:2},goog.define("goog.events.CAPTURE_SIMULATION_MODE",2),goog.events.listenerCountEstimate_=0,goog.events.listen=function(t,o,e,n,r){if(goog.isArray(o)){for(var g=0;g<o.length;g++)goog.events.listen(t,o[g],e,n,r);return null}return e=goog.events.wrapListener(e),goog.events.Listenable.isImplementedBy(t)?t.listen(o,e,n,r):goog.events.listen_(t,o,e,!1,n,r)},goog.events.listen_=function(t,o,e,n,r,g){if(!o)throw Error("Invalid event type");var i=!!r;if(i&&!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_FAIL)return goog.asserts.fail("Can not register capture listener in IE8-."),null;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.OFF_AND_SILENT)return null}var s=goog.events.getListenerMap_(t);s||(t[goog.events.LISTENER_MAP_PROP_]=s=new goog.events.ListenerMap(t));var a=s.add(o,e,n,r,g);if(a.proxy)return a;var l=goog.events.getProxy();return a.proxy=l,l.src=t,l.listener=a,t.addEventListener?t.addEventListener(o.toString(),l,i):t.attachEvent(goog.events.getOnString_(o.toString()),l),goog.events.listenerCountEstimate_++,a},goog.events.getProxy=function(){var t=goog.events.handleBrowserEvent_,o=goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT?function(e){return t.call(o.src,o.listener,e)}:function(e){var n=t.call(o.src,o.listener,e);return n?void 0:n};return o},goog.events.listenOnce=function(t,o,e,n,r){if(goog.isArray(o)){for(var g=0;g<o.length;g++)goog.events.listenOnce(t,o[g],e,n,r);return null}return e=goog.events.wrapListener(e),goog.events.Listenable.isImplementedBy(t)?t.listenOnce(o,e,n,r):goog.events.listen_(t,o,e,!0,n,r)},goog.events.listenWithWrapper=function(t,o,e,n,r){o.listen(t,e,n,r)},goog.events.unlisten=function(t,o,e,n,r){if(goog.isArray(o)){for(var g=0;g<o.length;g++)goog.events.unlisten(t,o[g],e,n,r);return null}if(e=goog.events.wrapListener(e),goog.events.Listenable.isImplementedBy(t))return t.unlisten(o,e,n,r);if(!t)return!1;var i=!!n,s=goog.events.getListenerMap_(t);if(s){var a=s.getListener(o,e,i,r);if(a)return goog.events.unlistenByKey(a)}return!1},goog.events.unlistenByKey=function(t){if(goog.isNumber(t))return!1;var o=t;if(!o||o.removed)return!1;var e=o.src;if(goog.events.Listenable.isImplementedBy(e))return e.unlistenByKey(o);var n=o.type,r=o.proxy;e.removeEventListener?e.removeEventListener(n,r,o.capture):e.detachEvent&&e.detachEvent(goog.events.getOnString_(n),r),goog.events.listenerCountEstimate_--;var g=goog.events.getListenerMap_(e);return g?(g.removeByKey(o),0==g.getTypeCount()&&(g.src=null,e[goog.events.LISTENER_MAP_PROP_]=null)):o.markAsRemoved(),!0},goog.events.unlistenWithWrapper=function(t,o,e,n,r){o.unlisten(t,e,n,r)},goog.events.removeAll=function(t,o){if(!t)return 0;if(goog.events.Listenable.isImplementedBy(t))return t.removeAllListeners(o);var e=goog.events.getListenerMap_(t);if(!e)return 0;var n=0,r=o&&o.toString();for(var g in e.listeners)if(!r||g==r)for(var i=e.listeners[g].concat(),s=0;s<i.length;++s)goog.events.unlistenByKey(i[s])&&++n;return n},goog.events.removeAllNativeListeners=function(){return goog.events.listenerCountEstimate_=0,0},goog.events.getListeners=function(t,o,e){if(goog.events.Listenable.isImplementedBy(t))return t.getListeners(o,e);if(!t)return[];var n=goog.events.getListenerMap_(t);return n?n.getListeners(o,e):[]},goog.events.getListener=function(t,o,e,n,r){o=o,e=goog.events.wrapListener(e);var g=!!n;if(goog.events.Listenable.isImplementedBy(t))return t.getListener(o,e,g,r);if(!t)return null;var i=goog.events.getListenerMap_(t);return i?i.getListener(o,e,g,r):null},goog.events.hasListener=function(t,o,e){if(goog.events.Listenable.isImplementedBy(t))return t.hasListener(o,e);var n=goog.events.getListenerMap_(t);return!!n&&n.hasListener(o,e)},goog.events.expose=function(t){var o=[];for(var e in t)t[e]&&t[e].id?o.push(e+" = "+t[e]+" ("+t[e].id+")"):o.push(e+" = "+t[e]);return o.join("\n")},goog.events.getOnString_=function(t){return t in goog.events.onStringMap_?goog.events.onStringMap_[t]:goog.events.onStringMap_[t]=goog.events.onString_+t},goog.events.fireListeners=function(t,o,e,n){return goog.events.Listenable.isImplementedBy(t)?t.fireListeners(o,e,n):goog.events.fireListeners_(t,o,e,n)},goog.events.fireListeners_=function(t,o,e,n){var r=1,g=goog.events.getListenerMap_(t);if(g){var i=g.listeners[o.toString()];if(i){i=i.concat();for(var s=0;s<i.length;s++){var a=i[s];a&&a.capture==e&&!a.removed&&(r&=goog.events.fireListener(a,n)!==!1)}}}return Boolean(r)},goog.events.fireListener=function(t,o){var e=t.listener,n=t.handler||t.src;return t.callOnce&&goog.events.unlistenByKey(t),e.call(n,o)},goog.events.getTotalListenerCount=function(){return goog.events.listenerCountEstimate_},goog.events.dispatchEvent=function(t,o){return goog.asserts.assert(goog.events.Listenable.isImplementedBy(t),"Can not use goog.events.dispatchEvent with non-goog.events.Listenable instance."),t.dispatchEvent(o)},goog.events.protectBrowserEventEntryPoint=function(t){goog.events.handleBrowserEvent_=t.protectEntryPoint(goog.events.handleBrowserEvent_)},goog.events.handleBrowserEvent_=function(t,o){if(t.removed)return!0;if(!goog.events.BrowserFeature.HAS_W3C_EVENT_SUPPORT){var e=o||goog.getObjectByName("window.event"),n=new goog.events.BrowserEvent(e,this),r=!0;if(goog.events.CAPTURE_SIMULATION_MODE==goog.events.CaptureSimulationMode.ON){if(!goog.events.isMarkedIeEvent_(e)){goog.events.markIeEvent_(e);for(var g=[],i=n.currentTarget;i;i=i.parentNode)g.push(i);for(var s=t.type,a=g.length-1;!n.propagationStopped_&&a>=0;a--)n.currentTarget=g[a],r&=goog.events.fireListeners_(g[a],s,!0,n);for(var a=0;!n.propagationStopped_&&a<g.length;a++)n.currentTarget=g[a],r&=goog.events.fireListeners_(g[a],s,!1,n)}}else r=goog.events.fireListener(t,n);return r}return goog.events.fireListener(t,new goog.events.BrowserEvent(o,this))},goog.events.markIeEvent_=function(t){var o=!1;if(0==t.keyCode)try{return void(t.keyCode=-1)}catch(e){o=!0}(o||void 0==t.returnValue)&&(t.returnValue=!0)},goog.events.isMarkedIeEvent_=function(t){return t.keyCode<0||void 0!=t.returnValue},goog.events.uniqueIdCounter_=0,goog.events.getUniqueId=function(t){return t+"_"+goog.events.uniqueIdCounter_++},goog.events.getListenerMap_=function(t){var o=t[goog.events.LISTENER_MAP_PROP_];return o instanceof goog.events.ListenerMap?o:null},goog.events.LISTENER_WRAPPER_PROP_="__closure_events_fn_"+(1e9*Math.random()>>>0),goog.events.wrapListener=function(t){return goog.asserts.assert(t,"Listener can not be null."),goog.isFunction(t)?t:(goog.asserts.assert(t.handleEvent,"An object listener must have handleEvent method."),t[goog.events.LISTENER_WRAPPER_PROP_]||(t[goog.events.LISTENER_WRAPPER_PROP_]=function(o){return t.handleEvent(o)}),t[goog.events.LISTENER_WRAPPER_PROP_])},goog.debug.entryPointRegistry.register(function(t){goog.events.handleBrowserEvent_=t(goog.events.handleBrowserEvent_)});var P={version:"1.0.0"};"object"==typeof module&&"object"==typeof module.exports?module.exports=P:"function"==typeof define&&define.amd&&define(P),"undefined"!=typeof window&&expose(),P.Constants={TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,FITTING_COUNT:100,ZERO_TOLERANCE:1e-4},P.Utils={_stampId:0},P.Utils.trim=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},P.Utils.stamp=function(t){var o="_p_id_";return t[o]=t[o]||this._stampId++,t[o]},P.DomUtils={},P.DomUtils.create=function(t,o,e,n){var r=document.createElement(t);return r.className=o||"",n&&(r.id=n),e&&e.appendChild(r),r},P.DomUtils.createHidden=function(t,o,e){var n=document.createElement(t);return n.style.display="none",e&&(n.id=e),o&&o.appendChild(n),n},P.DomUtils.remove=function(t,o){o&&t&&o.removeChild(t)},P.DomUtils.get=function(t){return document.getElementById(t)},P.DomUtils.getStyle=function(t,o){var e=t.style[o];return"auto"===e?null:e},P.DomUtils.hasClass=function(t,o){return t.className.length>0&&new RegExp("(^|\\s)"+o+"(\\s|$)").test(t.className)},P.DomUtils.addClass=function(t,o){this.hasClass(t,o)||(t.className&&(t.className+=" "),t.className+=o)},P.DomUtils.removeClass=function(t,o){t.className=P.Utils.trim((" "+t.className+" ").replace(" "+o+" "," "))},P.DomUtils.getDomEventKey=function(t,o,e){return"_p_dom_event_"+t+"_"+P.Utils.stamp(o)+(e?"_"+P.Utils.stamp(e):"")},P.DomUtils.addListener=function(t,o,e,n){var r=this,g=P.DomUtils.getDomEventKey(o,e,n),i=t[g];return i?r:(i=function(o){return e.call(n||t,o)},"addEventListener"in t?t.addEventListener(o,i,!1):"attachEvent"in t&&t.attachEvent("on"+o,i),t[g]=i,r)},P.DomUtils.removeListener=function(t,o,e,n){var r=this,g=P.DomUtils.getDomEventKey(o,e,n),i=t[g];return i?("removeEventListener"in t?t.removeEventListener(o,i,!1):"detachEvent"in t&&t.detachEvent("on"+o,i),t[g]=null,r):r},P.PlotTypes={ARC:"arc",ELLIPSE:"ellipse",CURVE:"curve",CLOSED_CURVE:"closedcurve",LUNE:"lune",SECTOR:"sector",GATHERING_PLACE:"gatheringplace",STRAIGHT_ARROW:"straightarrow",ASSAULT_DIRECTION:"assaultdirection",ATTACK_ARROW:"attackarrow",TAILED_ATTACK_ARROW:"tailedattackarrow",SQUAD_COMBAT:"squadcombat",TAILED_SQUAD_COMBAT:"tailedsquadcombat",FINE_ARROW:"finearrow",CIRCLE:"circle",DOUBLE_ARROW:"doublearrow",POLYLINE:"polyline",FREEHAND_LINE:"freehandline",POLYGON:"polygon",FREEHAND_POLYGON:"freehandpolygon",RECTANGLE:"rectangle",POINT:"point",TRIANGLE:"triangle",Rectangle:"rectangle"},P.PlotUtils={},P.PlotUtils.distance=function(t,o){return Math.sqrt(Math.pow(t[0]-o[0],2)+Math.pow(t[1]-o[1],2))},P.PlotUtils.wholeDistance=function(t){for(var o=0,e=0;e<t.length-1;e++)o+=P.PlotUtils.distance(t[e],t[e+1]);return o},P.PlotUtils.getBaseLength=function(t){return Math.pow(P.PlotUtils.wholeDistance(t),.99)},P.PlotUtils.mid=function(t,o){return[(t[0]+o[0])/2,(t[1]+o[1])/2]},P.PlotUtils.getCircleCenterOfThreePoints=function(t,o,e){var n=[(t[0]+o[0])/2,(t[1]+o[1])/2],r=[n[0]-t[1]+o[1],n[1]+t[0]-o[0]],g=[(t[0]+e[0])/2,(t[1]+e[1])/2],i=[g[0]-t[1]+e[1],g[1]+t[0]-e[0]];return P.PlotUtils.getIntersectPoint(n,r,g,i)},P.PlotUtils.getIntersectPoint=function(t,o,e,n){if(t[1]==o[1]){var r=(n[0]-e[0])/(n[1]-e[1]),g=r*(t[1]-e[1])+e[0],i=t[1];return[g,i]}if(e[1]==n[1]){var s=(o[0]-t[0])/(o[1]-t[1]);return g=s*(e[1]-t[1])+t[0],i=e[1],[g,i]}return s=(o[0]-t[0])/(o[1]-t[1]),r=(n[0]-e[0])/(n[1]-e[1]),i=(s*t[1]-t[0]-r*e[1]+e[0])/(s-r),g=s*i-s*t[1]+t[0],[g,i]},P.PlotUtils.getAzimuth=function(t,o){var e,n=Math.asin(Math.abs(o[1]-t[1])/P.PlotUtils.distance(t,o));return o[1]>=t[1]&&o[0]>=t[0]?e=n+Math.PI:o[1]>=t[1]&&o[0]<t[0]?e=P.Constants.TWO_PI-n:o[1]<t[1]&&o[0]<t[0]?e=n:o[1]<t[1]&&o[0]>=t[0]&&(e=Math.PI-n),e},P.PlotUtils.getAngleOfThreePoints=function(t,o,e){var n=P.PlotUtils.getAzimuth(o,t)-P.PlotUtils.getAzimuth(o,e);return 0>n?n+P.Constants.TWO_PI:n},P.PlotUtils.isClockWise=function(t,o,e){return(e[1]-t[1])*(o[0]-t[0])>(o[1]-t[1])*(e[0]-t[0])},P.PlotUtils.getPointOnLine=function(t,o,e){var n=o[0]+t*(e[0]-o[0]),r=o[1]+t*(e[1]-o[1]);return[n,r]},P.PlotUtils.getCubicValue=function(t,o,e,n,r){t=Math.max(Math.min(t,1),0);var g=1-t,i=t*t,s=i*t,a=g*g,l=a*g,u=l*o[0]+3*a*t*e[0]+3*g*i*n[0]+s*r[0],c=l*o[1]+3*a*t*e[1]+3*g*i*n[1]+s*r[1];return[u,c]},P.PlotUtils.getThirdPoint=function(t,o,e,n,r){var g=P.PlotUtils.getAzimuth(t,o),i=r?g+e:g-e,s=n*Math.cos(i),a=n*Math.sin(i);return[o[0]+s,o[1]+a]},P.PlotUtils.getArcPoints=function(t,o,e,n){var r,g,i=[],s=n-e;s=0>s?s+P.Constants.TWO_PI:s;for(var a=0;a<=P.Constants.FITTING_COUNT;a++){var l=e+s*a/P.Constants.FITTING_COUNT;r=t[0]+o*Math.cos(l),g=t[1]+o*Math.sin(l),i.push([r,g])}return i},P.PlotUtils.getBisectorNormals=function(t,o,e,n){var r=P.PlotUtils.getNormal(o,e,n),g=Math.sqrt(r[0]*r[0]+r[1]*r[1]),i=r[0]/g,s=r[1]/g,a=P.PlotUtils.distance(o,e),l=P.PlotUtils.distance(e,n);if(g>P.Constants.ZERO_TOLERANCE)if(P.PlotUtils.isClockWise(o,e,n)){var u=t*a,c=e[0]-u*s,p=e[1]+u*i,h=[c,p];u=t*l,c=e[0]+u*s,p=e[1]-u*i;var d=[c,p]}else u=t*a,c=e[0]+u*s,p=e[1]-u*i,h=[c,p],u=t*l,c=e[0]-u*s,p=e[1]+u*i,d=[c,p];else c=e[0]+t*(o[0]-e[0]),p=e[1]+t*(o[1]-e[1]),h=[c,p],c=e[0]+t*(n[0]-e[0]),p=e[1]+t*(n[1]-e[1]),d=[c,p];return[h,d]},P.PlotUtils.getNormal=function(t,o,e){var n=t[0]-o[0],r=t[1]-o[1],g=Math.sqrt(n*n+r*r);n/=g,r/=g;var i=e[0]-o[0],s=e[1]-o[1],a=Math.sqrt(i*i+s*s);i/=a,s/=a;var l=n+i,u=r+s;return[l,u]},P.PlotUtils.getCurvePoints=function(t,o){for(var e=P.PlotUtils.getLeftMostControlPoint(o),n=[e],r=0;r<o.length-2;r++){var g=o[r],i=o[r+1],s=o[r+2],a=P.PlotUtils.getBisectorNormals(t,g,i,s);n=n.concat(a)}var l=P.PlotUtils.getRightMostControlPoint(o);n.push(l);var u=[];for(r=0;r<o.length-1;r++){g=o[r],i=o[r+1],u.push(g);for(var t=0;t<P.Constants.FITTING_COUNT;t++){var c=P.PlotUtils.getCubicValue(t/P.Constants.FITTING_COUNT,g,n[2*r],n[2*r+1],i);u.push(c)}u.push(i)}return u},P.PlotUtils.getLeftMostControlPoint=function(o){var e=o[0],n=o[1],r=o[2],g=P.PlotUtils.getBisectorNormals(0,e,n,r),i=g[0],s=P.PlotUtils.getNormal(e,n,r),a=Math.sqrt(s[0]*s[0]+s[1]*s[1]);if(a>P.Constants.ZERO_TOLERANCE)var l=P.PlotUtils.mid(e,n),u=e[0]-l[0],c=e[1]-l[1],p=P.PlotUtils.distance(e,n),h=2/p,d=-h*c,f=h*u,E=d*d-f*f,v=2*d*f,A=f*f-d*d,m=i[0]-l[0],y=i[1]-l[1],_=l[0]+E*m+v*y,T=l[1]+v*m+A*y;else _=e[0]+t*(n[0]-e[0]),T=e[1]+t*(n[1]-e[1]);return[_,T]},P.PlotUtils.getRightMostControlPoint=function(o){var e=o.length,n=o[e-3],r=o[e-2],g=o[e-1],i=P.PlotUtils.getBisectorNormals(0,n,r,g),s=i[1],a=P.PlotUtils.getNormal(n,r,g),l=Math.sqrt(a[0]*a[0]+a[1]*a[1]);if(l>P.Constants.ZERO_TOLERANCE)var u=P.PlotUtils.mid(r,g),c=g[0]-u[0],p=g[1]-u[1],h=P.PlotUtils.distance(r,g),d=2/h,f=-d*p,E=d*c,v=f*f-E*E,A=2*f*E,m=E*E-f*f,y=s[0]-u[0],_=s[1]-u[1],T=u[0]+v*y+A*_,O=u[1]+A*y+m*_;else T=g[0]+t*(r[0]-g[0]),O=g[1]+t*(r[1]-g[1]);return[T,O]},P.PlotUtils.getBezierPoints=function(t){if(t.length<=2)return t;for(var o=[],e=t.length-1,n=0;1>=n;n+=.01){for(var r=y=0,g=0;e>=g;g++){var i=P.PlotUtils.getBinomialFactor(e,g),s=Math.pow(n,g),a=Math.pow(1-n,e-g);r+=i*s*a*t[g][0],y+=i*s*a*t[g][1]}o.push([r,y])}return o.push(t[e]),o},P.PlotUtils.getBinomialFactor=function(t,o){return P.PlotUtils.getFactorial(t)/(P.PlotUtils.getFactorial(o)*P.PlotUtils.getFactorial(t-o))},P.PlotUtils.getFactorial=function(t){if(1>=t)return 1;if(2==t)return 2;if(3==t)return 6;if(4==t)return 24;if(5==t)return 120;for(var o=1,e=1;t>=e;e++)o*=e;return o},P.PlotUtils.getQBSplinePoints=function(t){if(t.length<=2)return t;var o=2,e=[],n=t.length-o-1;e.push(t[0]);for(var r=0;n>=r;r++)for(var g=0;1>=g;g+=.05){for(var i=y=0,s=0;o>=s;s++){var a=P.PlotUtils.getQuadricBSplineFactor(s,g);i+=a*t[r+s][0],y+=a*t[r+s][1]}e.push([i,y])}return e.push(t[t.length-1]),e},P.PlotUtils.getQuadricBSplineFactor=function(t,o){return 0==t?Math.pow(o-1,2)/2:1==t?(-2*Math.pow(o,2)+2*o+1)/2:2==t?Math.pow(o,2)/2:0},P.Event={},P.Event.EventType={},P.Event.EventType.MOUSEMOVE="mousemove",P.Event.EventType.MOUSEUP="mouseup",P.Event.EventType.MOUSEDOWN="mousedown",P.Event.PlotDrawEvent=function(t,o){goog.base(this,t),this.feature=o},goog.inherits(P.Event.PlotDrawEvent,goog.events.Event),P.Event.PlotDrawEvent.DRAW_START="draw_start",P.Event.PlotDrawEvent.DRAW_END="draw_end",P.Event.PlotEditEvent=function(t,o){goog.base(this,t),this.feature=o},goog.inherits(P.Event.PlotEditEvent,goog.events.Event),P.Event.PlotEditEvent.EDIT_START="edit_start",P.Event.PlotEditEvent.EDIT_END="edit_end",P.Event.PlotEditEvent.ACTIVE_PLOT_CHANGE="active_plot_change",P.Plot=function(t){this.setPoints(t)},P.Plot.prototype={map:null,setMap:function(){this.map=map},getMap:function(){return this.map},isPlot:function(){return!0},setPoints:function(t){this.points=t?t:[],this.points.length>=2&&this.generate()},getPoints:function(){return this.points.slice(0)},getPointCount:function(){return this.points.length},updatePoint:function(t,o){o>=0&&o<this.points.length&&(this.points[o]=t,this.generate())},updateLastPoint:function(t){this.updatePoint(t,this.points.length-1)},generate:function(){},finishDrawing:function(){}},P.Plot.Arc=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.ARC,this.fixPointCount=3,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.Arc,ol.geom.LineString),goog.mixin(P.Plot.Arc.prototype,P.Plot.prototype),P.Plot.Arc.prototype.generate=function(){var t=this.getPointCount();if(!(2>t))if(2==t)this.setCoordinates(this.points);else{var o=this.points[0],e=this.points[1],n=this.points[2],r=P.PlotUtils.getCircleCenterOfThreePoints(o,e,n),g=P.PlotUtils.distance(o,r),i=P.PlotUtils.getAzimuth(o,r),s=P.PlotUtils.getAzimuth(e,r);if(P.PlotUtils.isClockWise(o,e,n))var a=s,l=i;else a=i,l=s;this.setCoordinates(P.PlotUtils.getArcPoints(r,g,a,l))}},P.Plot.AttackArrow=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.ATTACK_ARROW,this.headHeightFactor=.18,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.headTailFactor=.8,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.AttackArrow,ol.geom.Polygon),goog.mixin(P.Plot.AttackArrow.prototype,P.Plot.prototype),P.Plot.AttackArrow.prototype.generate=function(){if(!(this.getPointCount()<2)){if(2==this.getPointCount())return void this.setCoordinates([this.points]);var t=this.getPoints(),o=t[0],e=t[1];P.PlotUtils.isClockWise(t[0],t[1],t[2])&&(o=t[1],e=t[0]);var n=P.PlotUtils.mid(o,e),r=[n].concat(t.slice(2)),g=this.getArrowHeadPoints(r,o,e),i=g[0],s=g[4],a=P.PlotUtils.distance(o,e)/P.PlotUtils.getBaseLength(r),l=this.getArrowBodyPoints(r,i,s,a),u=l.length,c=[o].concat(l.slice(0,u/2));c.push(i);var p=[e].concat(l.slice(u/2,u));p.push(s),c=P.PlotUtils.getQBSplinePoints(c),p=P.PlotUtils.getQBSplinePoints(p),this.setCoordinates([c.concat(g,p.reverse())])}},P.Plot.AttackArrow.prototype.getArrowHeadPoints=function(t,o,e){var n=P.PlotUtils.getBaseLength(t),r=n*this.headHeightFactor,g=t[t.length-1];n=P.PlotUtils.distance(g,t[t.length-2]);var i=P.PlotUtils.distance(o,e);r>i*this.headTailFactor&&(r=i*this.headTailFactor);var s=r*this.headWidthFactor,a=r*this.neckWidthFactor;r=r>n?n:r;var l=r*this.neckHeightFactor,u=P.PlotUtils.getThirdPoint(t[t.length-2],g,0,r,!0),c=P.PlotUtils.getThirdPoint(t[t.length-2],g,0,l,!0),p=P.PlotUtils.getThirdPoint(g,u,P.Constants.HALF_PI,s,!1),h=P.PlotUtils.getThirdPoint(g,u,P.Constants.HALF_PI,s,!0),d=P.PlotUtils.getThirdPoint(g,c,P.Constants.HALF_PI,a,!1),f=P.PlotUtils.getThirdPoint(g,c,P.Constants.HALF_PI,a,!0);return[d,p,g,h,f]},P.Plot.AttackArrow.prototype.getArrowBodyPoints=function(t,o,e,n){for(var r=P.PlotUtils.wholeDistance(t),g=P.PlotUtils.getBaseLength(t),i=g*n,s=P.PlotUtils.distance(o,e),a=(i-s)/2,l=0,u=[],c=[],p=1;p<t.length-1;p++){var h=P.PlotUtils.getAngleOfThreePoints(t[p-1],t[p],t[p+1])/2;l+=P.PlotUtils.distance(t[p-1],t[p]);var d=(i/2-l/r*a)/Math.sin(h),f=P.PlotUtils.getThirdPoint(t[p-1],t[p],Math.PI-h,d,!0),E=P.PlotUtils.getThirdPoint(t[p-1],t[p],h,d,!1);u.push(f),c.push(E)}return u.concat(c)},P.Plot.SquadCombat=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.SQUAD_COMBAT,this.headHeightFactor=.18,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.tailWidthFactor=.1,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.SquadCombat,P.Plot.AttackArrow),P.Plot.SquadCombat.prototype.generate=function(){var t=this.getPoints(),o=this.getTailPoints(t),e=this.getArrowHeadPoints(t,o[0],o[1]),n=e[0],r=e[4],g=this.getArrowBodyPoints(t,n,r,this.tailWidthFactor),i=g.length,s=[o[0]].concat(g.slice(0,i/2));s.push(n);var a=[o[1]].concat(g.slice(i/2,i));a.push(r),s=P.PlotUtils.getQBSplinePoints(s),a=P.PlotUtils.getQBSplinePoints(a),this.setCoordinates([s.concat(e,a.reverse())])},P.Plot.SquadCombat.prototype.getTailPoints=function(t){var o=P.PlotUtils.getBaseLength(t),e=o*this.tailWidthFactor,n=P.PlotUtils.getThirdPoint(t[1],t[0],P.Constants.HALF_PI,e,!1),r=P.PlotUtils.getThirdPoint(t[1],t[0],P.Constants.HALF_PI,e,!0);return[n,r]},P.Plot.TailedAttackArrow=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.TAILED_ATTACK_ARROW,this.headHeightFactor=.18,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.tailWidthFactor=.1,this.headTailFactor=.8,this.swallowTailFactor=1,this.swallowTailPnt=null,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.TailedAttackArrow,P.Plot.AttackArrow),P.Plot.TailedAttackArrow.prototype.generate=function(){if(2==this.getPointCount())return void this.setCoordinates([this.points]);var t=this.getPoints(),o=t[0],e=t[1];P.PlotUtils.isClockWise(t[0],t[1],t[2])&&(o=t[1],e=t[0]);var n=P.PlotUtils.mid(o,e),r=[n].concat(t.slice(2)),g=this.getArrowHeadPoints(r,o,e),i=g[0],s=g[4],a=P.PlotUtils.distance(o,e),l=P.PlotUtils.getBaseLength(r),u=l*this.tailWidthFactor*this.swallowTailFactor;this.swallowTailPnt=P.PlotUtils.getThirdPoint(r[1],r[0],0,u,!0);var c=a/l,p=this.getArrowBodyPoints(r,i,s,c),h=p.length,d=[o].concat(p.slice(0,h/2));d.push(i);var f=[e].concat(p.slice(h/2,h));f.push(s),d=P.PlotUtils.getQBSplinePoints(d),f=P.PlotUtils.getQBSplinePoints(f),this.setCoordinates([d.concat(g,f.reverse(),[this.swallowTailPnt,d[0]])])},P.Plot.TailedSquadCombat=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.TAILED_SQUAD_COMBAT,this.headHeightFactor=.18,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.tailWidthFactor=.1,this.swallowTailFactor=1,this.swallowTailPnt=null,this.setPoints(t),this.fixPointCount=2,this.set("params",o)},goog.inherits(P.Plot.TailedSquadCombat,P.Plot.AttackArrow),P.Plot.TailedSquadCombat.prototype.generate=function(){var t=this.getPoints(),o=this.getTailPoints(t),e=this.getArrowHeadPoints(t,o[0],o[2]),n=e[0],r=e[4],g=this.getArrowBodyPoints(t,n,r,this.tailWidthFactor),i=g.length,s=[o[0]].concat(g.slice(0,i/2));s.push(n);var a=[o[2]].concat(g.slice(i/2,i));a.push(r),s=P.PlotUtils.getQBSplinePoints(s),a=P.PlotUtils.getQBSplinePoints(a),this.setCoordinates([s.concat(e,a.reverse(),[o[1],s[0]])])},P.Plot.TailedSquadCombat.prototype.getTailPoints=function(t){var o=P.PlotUtils.getBaseLength(t),e=o*this.tailWidthFactor,n=P.PlotUtils.getThirdPoint(t[1],t[0],P.Constants.HALF_PI,e,!1),r=P.PlotUtils.getThirdPoint(t[1],t[0],P.Constants.HALF_PI,e,!0),g=e*this.swallowTailFactor,i=P.PlotUtils.getThirdPoint(t[1],t[0],0,g,!0);return[n,i,r]},P.Plot.Circle=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.CIRCLE,this.fixPointCount=2,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.Circle,ol.geom.Polygon),goog.mixin(P.Plot.Circle.prototype,P.Plot.prototype),P.Plot.Circle.prototype.generate=function(){var t=this.points[0],o=P.PlotUtils.distance(t,this.points[1]);this.setCoordinates([this.generatePoints(t,o)])},P.Plot.Circle.prototype.generatePoints=function(t,o){for(var e,n,r,g=[],i=0;i<=P.Constants.FITTING_COUNT;i++)r=2*Math.PI*i/P.Constants.FITTING_COUNT,e=t[0]+o*Math.cos(r),n=t[1]+o*Math.sin(r),g.push([e,n]);return g},P.Plot.Circle.createCircleByCenterRadius=function(t){function o(o,n){t.projectRadius=r(o,n),i=new ol.geom.Circle(o,t.projectRadius);var g=ol.geom.Polygon.fromCircle(i),s=g.getCoordinates(),a=new ol.geom.MultiLineString(s);l.setGeometry(a),m.getSource().addFeature(l),l.setStyle(E);var P=ol.style.Style({fill:new ol.style.Fill({color:"red"}),stroke:new ol.style.Stroke({color:"blue",width:2}),image:new ol.style.Icon({src:"data:image;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyNpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkU2MTZEMEY5RjU3MjExRTVBODhFQTRFRkJDRUQzQzRGIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkU2MTZEMEZBRjU3MjExRTVBODhFQTRFRkJDRUQzQzRGIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RTYxNkQwRjdGNTcyMTFFNUE4OEVBNEVGQkNFRDNDNEYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RTYxNkQwRjhGNTcyMTFFNUE4OEVBNEVGQkNFRDNDNEYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz56huJRAAAByElEQVR42uxYwUrDQBBNYqENirZGFLxV8Ee8e/HkP/g5/o8XP6NQb4JiTA2FGDSNMzLBJWRnd7NbacsODKQ77e7bmTcvuw3rug422aJgw80D9AA9wG0HOFB+Iwy56B54DD6kuZoNV+QleEHP3abQ4VAp1N0AEdghgdMxBJl3Al0DwBH4BCOG1cKFFgR2bQD3wY8saYWZXOoCNGmS2AG4wJAa2gCRc2OHzTmmOR108d+uZZzD8YQWHdHYJ/EtJe51/QbnzJQiosFB3OkZs8EpUzJsiCfwb0n8BThY2ZY4ZjI3VfAJYxdM9mMXHBxKxpPWAig9N+DX9CzKUmI4txEHBwzRxed7Acgt+B3xsIm/9Vk/suh0MXtXrSwd05iqlJErmbG13hcfHYArpkMbewB/Fz5nNBYIsmMyt5HMJBIyn4Cft5oEy/oF/tjSuGcJB0uQmdQW4AGJapfMXAriLDPM3kxS5hwALm1LXDC8mjPxBtyc4WDhosRN+WLFq24iUKGkEqcKcJmr4xa+7k57nAG5rn79PcA6Om5Vgui6sAV7Deipg1iSDwfgch3u7eyRfysuTTrXzhWdAf/h2un/WfAAPUAPcLcB/ggwAItEk7WlWi40AAAAAElFTkSuQmCC"
})});u.setGeometry(new ol.geom.Point(i.getCenter())),u.setStyle(P),m.getSource().addFeature(u);var h=c.haversineDistance(i.getCenter(),i.getLastCoordinate());h=Math.floor(h)+1,h>t.maxRadius&&(h=t.maxRadius),$("#"+p).html(h+"m");var v=i.getLastCoordinate();f=new ol.Overlay({position:v,positioning:"center-center",element:d,offset:[0,0]}),t.map.addOverlay(f),$(d).css("display","block"),e()}function e(){$(document).on("mouseup",function(o){P&&s&&t.onRadiusChangeEnd&&t.onRadiusChangeEnd(i),P=!1,s=!1,$(document).off("mousemove"),$(d).off("mousemove")}),$(d).on("mouseup",function(o){P&&s&&t.onRadiusChangeEnd&&t.onRadiusChangeEnd(i),P=!1,s=!1,$(d).off("mousemove")}),$(d).on("mousedown",function(o){P=!0,o.preventDefault(),t.map.on("pointermove",function(o){if(s=!0,P){o.preventDefault?o.preventDefault():o.returnValue=!1,a=c.haversineDistance(i.getCenter(),i.getLastCoordinate());var e=n(o);if(e>=t.minpProjectRadius&&e<=t.projectRadius){i.setRadius(e);var r=ol.geom.Polygon.fromCircle(i),g=r.getCoordinates(),u=new ol.geom.MultiLineString(g);l.setGeometry(u),a=Math.floor(a)+1,a>t.maxRadius&&(a=t.maxRadius),$("#"+p).html(a+"m"),f.setPosition(i.getLastCoordinate())}}})})}function n(o){var e=i.getCenter(),n=o.coordinate,r=Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2));return r-t.projectRadius>0?r=t.projectRadius:r-t.minpProjectRadius<0&&(r=t.minpProjectRadius),r}function r(t,o){var e=c.offset(t,o,1.5*Math.PI),n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}var g={radius:500,minRadius:50,maxRadius:5e3,layerName:"perimeterSerachLayer"};t=$.extend(g,t);var i,s,a=t.radius,l=new ol.Feature({}),u=new ol.Feature({}),c=new ol.Sphere(6378137),p="nbHandleLabel"+Math.floor(1e3*(Math.random()+Math.random())),P=!1;t.minpProjectRadius=r(t.center,t.minRadius);var h,d="<div style='display: none; text-decoration: none;color: white;font-size: 14px;font-weight: bold;margin: 0px; padding: 0px; width: 31px; height: 19px; overflow: hidden;'><img src='data:img;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAUCAYAAABGUvnzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA2MDQwMkMzRDNGRTExRTJBQTNGRTNFMDhCOTA5NDczIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjA2MDQwMkM0RDNGRTExRTJBQTNGRTNFMDhCOTA5NDczIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDYwNDAyQzFEM0ZFMTFFMkFBM0ZFM0UwOEI5MDk0NzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDYwNDAyQzJEM0ZFMTFFMkFBM0ZFM0UwOEI5MDk0NzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5OfKcHAAAFT0lEQVRo3uWaS2wbRRjHTQOoRFTi0ZagVhQJiRO9AOoNCXEhnIpUwQXK49QTHJKmVbAbqkXiglTa3qmEVJWgIoJ4qChKiYBIDsRJlNj1I97Eid/xer2OHTtOYmf4f2Z3tbYn8dq1lMqO9FOkzOzM7P//zcw3O7EIgmDh8BB4WBgcPCqcP39a6O//AnwNhk3R1/cdfl8Dn4O3weFd+jFyEPRYLBZHu7Df2jLGLLzOHxFstmPo3IbG7D8PDy86Z2akBbc7lYjFcmZZ9PkUeu73kZEA2vkXfIbBPLWHwT2gl4RhbfDDMZir7bzDIblmZ1MBUcwtmYDqeebnlTk8V0/baoNpAI8JVuurqPzLX6OjocLGRnGnVGIlolhsHDynPr9jHx+PYCC/oe0XdzH4efBRmxpco+1qPF4Mrqww0e9nPq+Xedxu5jYB1aP69NzK8jKTJGlXbY0G0wC6haGhl1FpdGpiIkYGbW9ttYwi2kO0JjCQMfTxbAcZXKNtJBxmXo+HuZzO+4YMD4VCbG5qqkZbo8GPgheEgYFvJ8bGwtvb22yzUGg5ZDS9IAZyo4MMrtA2GonoM7ZVUHsUNNXaagYfAEexN3x44/p1N5mLpZlt5PNcXvvEUabRsjJol0z+8eZNEZH2egcYXKGtLMtMFEXm8/m4aPo1Wkb4sWQnEokKbTWDKXt9Sbhw4ZuZyck4mZBbX+eidUI0U06Q0aLHoyDSrnSAwbq203Z7nGbZIgzmYdSumXIiFAyyBZdL11Yz+EnwBjK7u4l4fGM9k2HZtbUajB3wys3Wo/ZhdAmD+LsDDNa1jYbDG2TAciBQg1EzXrnZepS0pWRZ11YzmDblM5jW9mwmU1xLp1laUSowNlxdxqNefVolvrLZZtHnoTY3WNcWwhfDmMGUEBkxalVdxqNe/TVMIk1bzeDnwHtw/Z9cNltSsE+kkskKjI1Wl/GoVz+fy7GrgjCHyD7S5gbr2mLilGKxGItGoxUYtaou41GvfgYrpKat0eD38Yc/pXi8kJIkllxdrcHYMK/cbD0ZiQCW6R289KSahLS7wWVtsf0VkghuSoSqMWrGKzdbD2ditp7N6tpqBh8D7yARGPHMz8syBrGKSONh7KCZciKJgUSCwRyWkO/VM2I7G6xr63U65TS2P8qkeRi1a6acULD9RUMhXVvNYPqW2StYrVd/unVLzGAQcZzVYtgveGidNFpGULvpVIqN37kTRFSf64Akq0Jbyj1ojySjeeh5S4NlBLWbw9Zn1FYzuBu8As6h4A+nwyHJmOqIBJppLYPak7BEL/p8aUTYGF76mQ4wuFLb6WmJTMYy2nLo+Lm0sFChrWZwFzgOTguXLn1JCQGZQGaEYUxoefm+CSN9xx70/9Lc1zeFJetM+Ual/Q2u0Tbg96c3NzdZHoa0ikKhwOLRaI22xk+VFGknwVm4f40GQrcclPHS0koGBXHOWllaMg/qk7k4/zFaEfxut1IewMWLn6KfQ1X7bzt/qqzRlm7Z6Nv81tZWGTK8GehZ+vIoer1cbY0GUzb7hLqcnC1HG5YU+uzlRuIFg/N0fqUjlFmoPoKjsHDvnvLr7dtLWDruCoODH6P9p9XI7pRv0btq63O5ZCSd+ZJ2Y9cASipVIGP30rb6urBLHcjJ8pJC+4bVeoUyQBoQIsTRMP3948LAwA/ofEi4fPnUHuZWGNyGF/77oi3vwv+AuqQcVyPuzXKaT5EH8RvgA/AueAucUs+Dj1ede7kX/g3286DSq77PvmrLM9gYcd1qmk9nuRPqDDPLCfW5I2rnXWb/ZafBfh5UetT32VdtyeD/AFqSV3weDOF9AAAAAElFTkSuQmCC'style='left: 0px; top: 0px;'> <label unselectable='on' id='"+p+"'style='position: absolute; display: inline; cursor: inherit; border: none; padding: 0px;white-space: nowrap; font-style: normal;font-variant: normal; font-weight: normal;font-stretch: normal; font-size: 12px;line-height: 20px;font-family: arial, simsun; height: 20px;color: black; text-indent: 5px;text-align: center; zoom: 1;width: 56px; -webkit-user-select: none;left: 30px; top: 0px;background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAUCAYAAABGUvnzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjA2MDQwMkMzRDNGRTExRTJBQTNGRTNFMDhCOTA5NDczIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjA2MDQwMkM0RDNGRTExRTJBQTNGRTNFMDhCOTA5NDczIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MDYwNDAyQzFEM0ZFMTFFMkFBM0ZFM0UwOEI5MDk0NzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MDYwNDAyQzJEM0ZFMTFFMkFBM0ZFM0UwOEI5MDk0NzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5OfKcHAAAFT0lEQVRo3uWaS2wbRRjHTQOoRFTi0ZagVhQJiRO9AOoNCXEhnIpUwQXK49QTHJKmVbAbqkXiglTa3qmEVJWgIoJ4qChKiYBIDsRJlNj1I97Eid/xer2OHTtOYmf4f2Z3tbYn8dq1lMqO9FOkzOzM7P//zcw3O7EIgmDh8BB4WBgcPCqcP39a6O//AnwNhk3R1/cdfl8Dn4O3weFd+jFyEPRYLBZHu7Df2jLGLLzOHxFstmPo3IbG7D8PDy86Z2akBbc7lYjFcmZZ9PkUeu73kZEA2vkXfIbBPLWHwT2gl4RhbfDDMZir7bzDIblmZ1MBUcwtmYDqeebnlTk8V0/baoNpAI8JVuurqPzLX6OjocLGRnGnVGIlolhsHDynPr9jHx+PYCC/oe0XdzH4efBRmxpco+1qPF4Mrqww0e9nPq+Xedxu5jYB1aP69NzK8jKTJGlXbY0G0wC6haGhl1FpdGpiIkYGbW9ttYwi2kO0JjCQMfTxbAcZXKNtJBxmXo+HuZzO+4YMD4VCbG5qqkZbo8GPgheEgYFvJ8bGwtvb22yzUGg5ZDS9IAZyo4MMrtA2GonoM7ZVUHsUNNXaagYfAEexN3x44/p1N5mLpZlt5PNcXvvEUabRsjJol0z+8eZNEZH2egcYXKGtLMtMFEXm8/m4aPo1Wkb4sWQnEokKbTWDKXt9Sbhw4ZuZyck4mZBbX+eidUI0U06Q0aLHoyDSrnSAwbq203Z7nGbZIgzmYdSumXIiFAyyBZdL11Yz+EnwBjK7u4l4fGM9k2HZtbUajB3wys3Wo/ZhdAmD+LsDDNa1jYbDG2TAciBQg1EzXrnZepS0pWRZ11YzmDblM5jW9mwmU1xLp1laUSowNlxdxqNefVolvrLZZtHnoTY3WNcWwhfDmMGUEBkxalVdxqNe/TVMIk1bzeDnwHtw/Z9cNltSsE+kkskKjI1Wl/GoVz+fy7GrgjCHyD7S5gbr2mLilGKxGItGoxUYtaou41GvfgYrpKat0eD38Yc/pXi8kJIkllxdrcHYMK/cbD0ZiQCW6R289KSahLS7wWVtsf0VkghuSoSqMWrGKzdbD2ditp7N6tpqBh8D7yARGPHMz8syBrGKSONh7KCZciKJgUSCwRyWkO/VM2I7G6xr63U65TS2P8qkeRi1a6acULD9RUMhXVvNYPqW2StYrVd/unVLzGAQcZzVYtgveGidNFpGULvpVIqN37kTRFSf64Akq0Jbyj1ojySjeeh5S4NlBLWbw9Zn1FYzuBu8As6h4A+nwyHJmOqIBJppLYPak7BEL/p8aUTYGF76mQ4wuFLb6WmJTMYy2nLo+Lm0sFChrWZwFzgOTguXLn1JCQGZQGaEYUxoefm+CSN9xx70/9Lc1zeFJetM+Ual/Q2u0Tbg96c3NzdZHoa0ikKhwOLRaI22xk+VFGknwVm4f40GQrcclPHS0koGBXHOWllaMg/qk7k4/zFaEfxut1IewMWLn6KfQ1X7bzt/qqzRlm7Z6Nv81tZWGTK8GehZ+vIoer1cbY0GUzb7hLqcnC1HG5YU+uzlRuIFg/N0fqUjlFmoPoKjsHDvnvLr7dtLWDruCoODH6P9p9XI7pRv0btq63O5ZCSd+ZJ2Y9cASipVIGP30rb6urBLHcjJ8pJC+4bVeoUyQBoQIsTRMP3948LAwA/ofEi4fPnUHuZWGNyGF/77oi3vwv+AuqQcVyPuzXKaT5EH8RvgA/AueAucUs+Dj1ede7kX/g3286DSq77PvmrLM9gYcd1qmk9nuRPqDDPLCfW5I2rnXWb/ZafBfh5UetT32VdtyeD/AFqSV3weDOF9AAAAAElFTkSuQmCC) -31px 0px;'></label></div>",f="<div title='Marker'></div>";f=jQuery.parseHTML(f)[0],d=jQuery.parseHTML(d)[0];var E=ol.style.Style({fill:new ol.style.Fill({color:"red"}),stroke:new ol.style.Stroke({color:"blue",width:1233}),image:new ol.style.Circle({radius:117,fill:new ol.style.Fill({color:"blue"})})}),v=!1,A=t.map.getLayers(),m=null;if(A.forEach(function(o){o.get("layerName")===t.layerName&&(v=!0,m=o)}),!v){var y=new ol.source.Vector({wrapX:!1});h=new ol.layer.Vector({source:y,layerName:t.layerName}),t.map.addLayer(h),m=h}return $(t.map.getTargetElement()).append(d),$(t.map.getTargetElement()).append(f),o(t.center,t.radius),{feature:l,centerFeature:u,markerOverLay:f,getRadius:function(){return a},setCenter:function(t){var o=this.getCircle();o.setCenter(t);var e=ol.geom.Polygon.fromCircle(o),n=e.getCoordinates(),r=new ol.geom.MultiLineString(n);l.setGeometry(r),u.setGeometry(new ol.geom.Point(t)),f.setPosition(l.getGeometry().getLastCoordinate())},getCircle:function(){return i},setRadius:function(t){var o=r(l.getGeometry().getCenter(),t),e=this.getCircle();e.setRadius(o);var n=ol.geom.Polygon.fromCircle(e),g=n.getCoordinates(),i=new ol.geom.MultiLineString(g);l.setGeometry(i)},getExtent:function(){return this.getCircle().getExtent()},getWKT:function(){var t=ol.geom.Polygon.fromCircle(this.getCircle()),o=(new ol.format.WKT).writeGeometry(t);return o},destroy:function(){t.map.removeLayer(m),t.map.removeOverlay(f)}}},P.Plot.ClosedCurve=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.CLOSED_CURVE,this.t=.3,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.ClosedCurve,ol.geom.Polygon),goog.mixin(P.Plot.ClosedCurve.prototype,P.Plot.prototype),P.Plot.ClosedCurve.prototype.generate=function(){if(2==this.getPointCount())this.setCoordinates([this.points]);else{var t=this.getPoints();t.push(t[0],t[1]);for(var o=[],e=0;e<t.length-2;e++){var n=P.PlotUtils.getBisectorNormals(this.t,t[e],t[e+1],t[e+2]);o=o.concat(n)}var r=o.length;o=[o[r-1]].concat(o.slice(0,r-1));var g=[];for(e=0;e<t.length-2;e++){var i=t[e],s=t[e+1];g.push(i);for(var a=0;a<=P.Constants.FITTING_COUNT;a++){var l=P.PlotUtils.getCubicValue(a/P.Constants.FITTING_COUNT,i,o[2*e],o[2*e+1],s);g.push(l)}g.push(s)}this.setCoordinates([g])}},P.Plot.Curve=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.CURVE,this.t=.3,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.Curve,ol.geom.LineString),goog.mixin(P.Plot.Curve.prototype,P.Plot.prototype),P.Plot.Curve.prototype.generate=function(){2==this.getPointCount()?this.setCoordinates(this.points):this.setCoordinates(P.PlotUtils.getCurvePoints(this.t,this.points))},P.Plot.DoubleArrow=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.DOUBLE_ARROW,this.headHeightFactor=.25,this.headWidthFactor=.3,this.neckHeightFactor=.85,this.neckWidthFactor=.15,this.connPoint=null,this.tempPoint4=null,this.fixPointCount=4,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.DoubleArrow,ol.geom.Polygon),goog.mixin(P.Plot.DoubleArrow.prototype,P.Plot.prototype),P.Plot.DoubleArrow.prototype.finishDrawing=function(){3==this.getPointCount()&&null!=this.tempPoint4&&this.points.push(this.tempPoint4),null!=this.connPoint&&this.points.push(this.connPoint)},P.Plot.DoubleArrow.prototype.generate=function(){if(2==this.getPointCount())return void this.setCoordinates([this.points]);var t=this.points[0],o=this.points[1],e=this.points[2],n=this.getPointCount();3==n?this.tempPoint4=this.getTempPoint4(t,o,e):this.tempPoint4=this.points[3],3==n||4==n?this.connPoint=P.PlotUtils.mid(t,o):this.connPoint=this.points[4];var r,g;P.PlotUtils.isClockWise(t,o,e)?(r=this.getArrowPoints(t,this.connPoint,this.tempPoint4,!1),g=this.getArrowPoints(this.connPoint,o,e,!0)):(r=this.getArrowPoints(o,this.connPoint,e,!1),g=this.getArrowPoints(this.connPoint,t,this.tempPoint4,!0));var i=r.length,s=(i-5)/2,a=r.slice(0,s),l=r.slice(s,s+5),u=r.slice(s+5,i),c=g.slice(0,s),p=g.slice(s,s+5),h=g.slice(s+5,i);c=P.PlotUtils.getBezierPoints(c);var d=P.PlotUtils.getBezierPoints(h.concat(a.slice(1)));u=P.PlotUtils.getBezierPoints(u);var f=c.concat(p,d,l,u);this.setCoordinates([f])},P.Plot.DoubleArrow.prototype.getArrowPoints=function(t,o,e,n){var r=P.PlotUtils.mid(t,o),g=P.PlotUtils.distance(r,e),i=P.PlotUtils.getThirdPoint(e,r,0,.3*g,!0),s=P.PlotUtils.getThirdPoint(e,r,0,.5*g,!0);i=P.PlotUtils.getThirdPoint(r,i,P.Constants.HALF_PI,g/5,n),s=P.PlotUtils.getThirdPoint(r,s,P.Constants.HALF_PI,g/4,n);var a=[r,i,s,e],l=this.getArrowHeadPoints(a,this.headHeightFactor,this.headWidthFactor,this.neckHeightFactor,this.neckWidthFactor),u=l[0],c=l[4],p=P.PlotUtils.distance(t,o)/P.PlotUtils.getBaseLength(a)/2,h=this.getArrowBodyPoints(a,u,c,p),d=h.length,f=h.slice(0,d/2),E=h.slice(d/2,d);return f.push(u),E.push(c),f=f.reverse(),f.push(o),E=E.reverse(),E.push(t),f.reverse().concat(l,E)},P.Plot.DoubleArrow.prototype.getArrowHeadPoints=function(t,o,e){var n=P.PlotUtils.getBaseLength(t),r=n*this.headHeightFactor,g=t[t.length-1],i=(P.PlotUtils.distance(o,e),r*this.headWidthFactor),s=r*this.neckWidthFactor,a=r*this.neckHeightFactor,l=P.PlotUtils.getThirdPoint(t[t.length-2],g,0,r,!0),u=P.PlotUtils.getThirdPoint(t[t.length-2],g,0,a,!0),c=P.PlotUtils.getThirdPoint(g,l,P.Constants.HALF_PI,i,!1),p=P.PlotUtils.getThirdPoint(g,l,P.Constants.HALF_PI,i,!0),h=P.PlotUtils.getThirdPoint(g,u,P.Constants.HALF_PI,s,!1),d=P.PlotUtils.getThirdPoint(g,u,P.Constants.HALF_PI,s,!0);return[h,c,g,p,d]},P.Plot.DoubleArrow.prototype.getArrowBodyPoints=function(t,o,e,n){for(var r=P.PlotUtils.wholeDistance(t),g=P.PlotUtils.getBaseLength(t),i=g*n,s=P.PlotUtils.distance(o,e),a=(i-s)/2,l=0,u=[],c=[],p=1;p<t.length-1;p++){var h=P.PlotUtils.getAngleOfThreePoints(t[p-1],t[p],t[p+1])/2;l+=P.PlotUtils.distance(t[p-1],t[p]);var d=(i/2-l/r*a)/Math.sin(h),f=P.PlotUtils.getThirdPoint(t[p-1],t[p],Math.PI-h,d,!0),E=P.PlotUtils.getThirdPoint(t[p-1],t[p],h,d,!1);u.push(f),c.push(E)}return u.concat(c)},P.Plot.DoubleArrow.prototype.getTempPoint4=function(t,o,e){var n,r,g,i,s=P.PlotUtils.mid(t,o),a=P.PlotUtils.distance(s,e),l=P.PlotUtils.getAngleOfThreePoints(t,s,e);return l<P.Constants.HALF_PI?(r=a*Math.sin(l),g=a*Math.cos(l),i=P.PlotUtils.getThirdPoint(t,s,P.Constants.HALF_PI,r,!1),n=P.PlotUtils.getThirdPoint(s,i,P.Constants.HALF_PI,g,!0)):l>=P.Constants.HALF_PI&&l<Math.PI?(r=a*Math.sin(Math.PI-l),g=a*Math.cos(Math.PI-l),i=P.PlotUtils.getThirdPoint(t,s,P.Constants.HALF_PI,r,!1),n=P.PlotUtils.getThirdPoint(s,i,P.Constants.HALF_PI,g,!1)):l>=Math.PI&&l<1.5*Math.PI?(r=a*Math.sin(l-Math.PI),g=a*Math.cos(l-Math.PI),i=P.PlotUtils.getThirdPoint(t,s,P.Constants.HALF_PI,r,!0),n=P.PlotUtils.getThirdPoint(s,i,P.Constants.HALF_PI,g,!0)):(r=a*Math.sin(2*Math.PI-l),g=a*Math.cos(2*Math.PI-l),i=P.PlotUtils.getThirdPoint(t,s,P.Constants.HALF_PI,r,!0),n=P.PlotUtils.getThirdPoint(s,i,P.Constants.HALF_PI,g,!1)),n},P.Plot.Ellipse=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.ELLIPSE,this.fixPointCount=2,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.Ellipse,ol.geom.Polygon),goog.mixin(P.Plot.Ellipse.prototype,P.Plot.prototype),P.Plot.Ellipse.prototype.generate=function(){if(!(this.getPointCount()<2)){var t=this.points[0],o=this.points[1],e=P.PlotUtils.mid(t,o),n=Math.abs((t[0]-o[0])/2),r=Math.abs((t[1]-o[1])/2);this.setCoordinates([this.generatePoints(e,n,r)])}},P.Plot.Ellipse.prototype.generatePoints=function(t,o,e){for(var n,r,g,i=[],s=0;s<=P.Constants.FITTING_COUNT;s++)g=2*Math.PI*s/P.Constants.FITTING_COUNT,n=t[0]+o*Math.cos(g),r=t[1]+e*Math.sin(g),i.push([n,r]);return i},P.Plot.FineArrow=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.FINE_ARROW,this.tailWidthFactor=.1,this.neckWidthFactor=.2,this.headWidthFactor=.25,this.headAngle=Math.PI/8.5,this.neckAngle=Math.PI/13,this.fixPointCount=2,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.FineArrow,ol.geom.Polygon),goog.mixin(P.Plot.FineArrow.prototype,P.Plot.prototype),P.Plot.FineArrow.prototype.generate=function(){var t=this.getPoints(),o=t[0],e=t[1],n=P.PlotUtils.getBaseLength(t),r=n*this.tailWidthFactor,g=n*this.neckWidthFactor,i=n*this.headWidthFactor,s=P.PlotUtils.getThirdPoint(e,o,P.Constants.HALF_PI,r,!0),a=P.PlotUtils.getThirdPoint(e,o,P.Constants.HALF_PI,r,!1),l=P.PlotUtils.getThirdPoint(o,e,this.headAngle,i,!1),u=P.PlotUtils.getThirdPoint(o,e,this.headAngle,i,!0),c=P.PlotUtils.getThirdPoint(o,e,this.neckAngle,g,!1),p=P.PlotUtils.getThirdPoint(o,e,this.neckAngle,g,!0),h=[s,c,l,e,u,p,a];this.setCoordinates([h])},P.Plot.AssaultDirection=function(t,o){goog.base(this,[]),this.tailWidthFactor=.05,this.neckWidthFactor=.1,this.headWidthFactor=.15,this.type=P.PlotTypes.ASSAULT_DIRECTION,this.headAngle=Math.PI/4,this.neckAngle=.17741*Math.PI,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.AssaultDirection,P.Plot.FineArrow),P.Plot.GatheringPlace=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.GATHERING_PLACE,this.t=.4,this.fixPointCount=3,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.GatheringPlace,ol.geom.Polygon),goog.mixin(P.Plot.GatheringPlace.prototype,P.Plot.prototype),P.Plot.GatheringPlace.prototype.generate=function(){var t=this.getPoints();if(!(t.length<2)){if(2==this.getPointCount()){var o=P.PlotUtils.mid(t[0],t[1]),e=P.PlotUtils.distance(t[0],o)/.9,n=P.PlotUtils.getThirdPoint(t[0],o,P.Constants.HALF_PI,e,!0);t=[t[0],n,t[1]]}var o=P.PlotUtils.mid(t[0],t[2]);t.push(o,t[0],t[1]);for(var r=[],g=0;g<t.length-2;g++){var i=t[g],s=t[g+1],a=t[g+2],l=P.PlotUtils.getBisectorNormals(this.t,i,s,a);r=r.concat(l)}var u=r.length;r=[r[u-1]].concat(r.slice(0,u-1));var c=[];for(g=0;g<t.length-2;g++){i=t[g],s=t[g+1],c.push(i);for(var p=0;p<=P.Constants.FITTING_COUNT;p++){var n=P.PlotUtils.getCubicValue(p/P.Constants.FITTING_COUNT,i,r[2*g],r[2*g+1],s);c.push(n)}c.push(s)}this.setCoordinates([c])}},P.Plot.Lune=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.LUNE,this.fixPointCount=3,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.Lune,ol.geom.Polygon),goog.mixin(P.Plot.Lune.prototype,P.Plot.prototype),P.Plot.Lune.prototype.generate=function(){if(!(this.getPointCount()<2)){var t=this.getPoints();if(2==this.getPointCount()){var o=P.PlotUtils.mid(t[0],t[1]),e=P.PlotUtils.distance(t[0],o),n=P.PlotUtils.getThirdPoint(t[0],o,P.Constants.HALF_PI,e);t.push(n)}var r=t[0],g=t[1],i=t[2],s=P.PlotUtils.getCircleCenterOfThreePoints(r,g,i),a=P.PlotUtils.distance(r,s),l=P.PlotUtils.getAzimuth(r,s),u=P.PlotUtils.getAzimuth(g,s);if(P.PlotUtils.isClockWise(r,g,i))var c=u,p=l;else c=l,p=u;var t=P.PlotUtils.getArcPoints(s,a,c,p);t.push(t[0]),this.setCoordinates([t])}},P.Plot.Sector=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.SECTOR,this.fixPointCount=3,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.Sector,ol.geom.Polygon),goog.mixin(P.Plot.Sector.prototype,P.Plot.prototype),P.Plot.Sector.prototype.generate=function(){if(!(this.getPointCount()<2))if(2==this.getPointCount())this.setCoordinates([this.points]);else{var t=this.getPoints(),o=t[0],e=t[1],n=t[2],r=P.PlotUtils.distance(e,o),g=P.PlotUtils.getAzimuth(e,o),i=P.PlotUtils.getAzimuth(n,o),s=P.PlotUtils.getArcPoints(o,r,g,i);s.push(o,s[0]),this.setCoordinates([s])}},P.Plot.StraightArrow=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.STRAIGHT_ARROW,this.fixPointCount=2,this.maxArrowLength=3e6,this.arrowLengthScale=5,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.StraightArrow,ol.geom.LineString),goog.mixin(P.Plot.StraightArrow.prototype,P.Plot.prototype),P.Plot.StraightArrow.prototype.generate=function(){if(!(this.getPointCount()<2)){var t=this.getPoints(),o=t[0],e=t[1],n=P.PlotUtils.distance(o,e),r=n/this.arrowLengthScale;r=r>this.maxArrowLength?this.maxArrowLength:r;var g=P.PlotUtils.getThirdPoint(o,e,Math.PI/6,r,!1),i=P.PlotUtils.getThirdPoint(o,e,Math.PI/6,r,!0);this.setCoordinates([o,e,g,e,i])}},P.Plot.Polyline=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.POLYLINE,this.set("params",o),this.setPoints(t)},goog.inherits(P.Plot.Polyline,ol.geom.LineString),goog.mixin(P.Plot.Polyline.prototype,P.Plot.prototype),P.Plot.Polyline.prototype.generate=function(){this.setCoordinates(this.points)},P.Plot.Rectangle=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.Rectangle,this.setPoints(t),this.fixPointCount=2,this.set("params",o),this.isFill=!0,"false"==o.isFill&&(this.isFill=!1)},goog.inherits(P.Plot.Rectangle,ol.geom.Polygon),goog.mixin(P.Plot.Rectangle.prototype,P.Plot.prototype),P.Plot.Rectangle.prototype.generate=function(){if(2==this.points.length){var t=[];if(this.isFill){var o=ol.extent.boundingExtent(this.points),e=ol.geom.Polygon.fromExtent(o);t=e.getCoordinates()}else{var n=this.points[0],r=this.points[1];t=[n,[n[0],r[1]],r,[r[0],n[1]],n]}this.setCoordinates(t)}},P.Plot.FreehandLine=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.FREEHAND_LINE,this.freehand=!0,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.FreehandLine,ol.geom.LineString),goog.mixin(P.Plot.FreehandLine.prototype,P.Plot.prototype),P.Plot.FreehandLine.prototype.generate=function(){this.setCoordinates(this.points)},P.Plot.Polygon=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.POLYGON,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.Polygon,ol.geom.Polygon),goog.mixin(P.Plot.Polygon.prototype,P.Plot.prototype),P.Plot.Polygon.prototype.generate=function(){this.setCoordinates([this.points])},P.Plot.FreehandPolygon=function(t,o){goog.base(this,[]),this.type=P.PlotTypes.FREEHAND_POLYGON,this.freehand=!0,this.setPoints(t),this.set("params",o)},goog.inherits(P.Plot.FreehandPolygon,ol.geom.Polygon),goog.mixin(P.Plot.FreehandPolygon.prototype,P.Plot.prototype),P.Plot.FreehandPolygon.prototype.generate=function(){this.setCoordinates([this.points])},P.PlotFactory={},P.PlotFactory.createPlot=function(t,o,e){switch(e||(e={}),t){case P.PlotTypes.ARC:return new P.Plot.Arc(o,e);case P.PlotTypes.ELLIPSE:return new P.Plot.Ellipse(o,e);case P.PlotTypes.CURVE:return new P.Plot.Curve(o,e);case P.PlotTypes.CLOSED_CURVE:return new P.Plot.ClosedCurve(o,e);case P.PlotTypes.LUNE:return new P.Plot.Lune(o,e);case P.PlotTypes.SECTOR:return new P.Plot.Sector(o,e);case P.PlotTypes.GATHERING_PLACE:return new P.Plot.GatheringPlace(o,e);case P.PlotTypes.STRAIGHT_ARROW:return new P.Plot.StraightArrow(o,e);case P.PlotTypes.ASSAULT_DIRECTION:return new P.Plot.AssaultDirection(o,e);case P.PlotTypes.ATTACK_ARROW:return new P.Plot.AttackArrow(o,e);case P.PlotTypes.FINE_ARROW:return new P.Plot.FineArrow(o,e);case P.PlotTypes.CIRCLE:return new P.Plot.Circle(o,e);case P.PlotTypes.DOUBLE_ARROW:return new P.Plot.DoubleArrow(o,e);case P.PlotTypes.TAILED_ATTACK_ARROW:return new P.Plot.TailedAttackArrow(o,e);case P.PlotTypes.SQUAD_COMBAT:return new P.Plot.SquadCombat(o,e);case P.PlotTypes.TAILED_SQUAD_COMBAT:return new P.Plot.TailedSquadCombat(o,e);case P.PlotTypes.FREEHAND_LINE:return new P.Plot.FreehandLine(o,e);case P.PlotTypes.FREEHAND_POLYGON:return new P.Plot.FreehandPolygon(o,e);case P.PlotTypes.POLYGON:return new P.Plot.Polygon(o,e);case P.PlotTypes.POLYLINE:return new P.Plot.Polyline(o,e);case P.PlotTypes.Rectangle:return new P.Plot.Rectangle(o,e)}return null},P.PlotDraw=function(t){goog.base(this,[]),this.points=null,this.plot=null,this.feature=null,this.plotType=null,this.plotParams=null,this.mapViewport=null,this.dblClickZoomInteraction=null;var o=new ol.style.Stroke({color:"#000000",width:1.25}),e=new ol.style.Fill({color:"rgba(0,0,0,0.4)"});this.style=new ol.style.Style({fill:e,stroke:o}),this.featureSource=new ol.source.Vector,this.drawOverlay=new ol.layer.Vector({source:this.featureSource}),this.drawOverlay.setStyle(this.style),this.setMap(t)},goog.inherits(P.PlotDraw,ol.Observable),P.PlotDraw.prototype.activate=function(t,o){this.deactivate(),this.deactivateMapTools(),this.map.on("click",this.mapFirstClickHandler,this),this.plotType=t,this.plotParams=o,this.map.addLayer(this.drawOverlay)},P.PlotDraw.prototype.deactivate=function(){this.disconnectEventHandlers(),this.map.removeLayer(this.drawOverlay),this.featureSource.clear(),this.points=[],this.plot=null,this.feature=null,this.plotType=null,this.plotParams=null,this.activateMapTools()},P.PlotDraw.prototype.isDrawing=function(){return null!=this.plotType},P.PlotDraw.prototype.setMap=function(t){this.map=t,this.mapViewport=this.map.getViewport()},P.PlotDraw.prototype.mapFirstClickHandler=function(t){this.points.push(t.coordinate),this.plot=P.PlotFactory.createPlot(this.plotType,this.points,this.plotParams),this.plot.setMap(this.map),this.feature=new ol.Feature(this.plot),this.featureSource.addFeature(this.feature),this.map.un("click",this.mapFirstClickHandler,this),this.map.on("click",this.mapNextClickHandler,this),this.plot.freehand||this.map.on("dblclick",this.mapDoubleClickHandler,this),goog.events.listen(this.mapViewport,P.Event.EventType.MOUSEMOVE,this.mapMouseMoveHandler,!1,this)},P.PlotDraw.prototype.mapMouseMoveHandler=function(t){var o=this.map.getCoordinateFromPixel([t.offsetX,t.offsetY]);if(!(P.PlotUtils.distance(o,this.points[this.points.length-1])<P.Constants.ZERO_TOLERANCE))if(this.plot.freehand)this.points.push(o),this.plot.setPoints(this.points);else{var e=this.points.concat([o]);this.plot.setPoints(e)}},P.PlotDraw.prototype.mapNextClickHandler=function(t){!this.plot.freehand&&P.PlotUtils.distance(t.coordinate,this.points[this.points.length-1])<P.Constants.ZERO_TOLERANCE||(this.points.push(t.coordinate),this.plot.setPoints(this.points),this.plot.fixPointCount==this.plot.getPointCount()&&this.mapDoubleClickHandler(t),this.plot&&this.plot.freehand&&this.mapDoubleClickHandler(t))},P.PlotDraw.prototype.mapDoubleClickHandler=function(t){this.disconnectEventHandlers(),this.plot.finishDrawing(),t.preventDefault(),this.drawEnd()},P.PlotDraw.prototype.disconnectEventHandlers=function(){this.map.un("click",this.mapFirstClickHandler,this),this.map.un("click",this.mapNextClickHandler,this),goog.events.unlisten(this.mapViewport,P.Event.EventType.MOUSEMOVE,this.mapMouseMoveHandler,!1,this),this.map.un("dblclick",this.mapDoubleClickHandler,this)},P.PlotDraw.prototype.drawEnd=function(t){this.featureSource.removeFeature(this.feature),this.activateMapTools(),this.disconnectEventHandlers(),this.map.removeOverlay(this.drawOverlay),this.points=[],this.plot=null,this.plotType=null,this.plotParams=null,this.dispatchEvent(new P.Event.PlotDrawEvent(P.Event.PlotDrawEvent.DRAW_END,this.feature)),this.feature=null},P.PlotDraw.prototype.deactivateMapTools=function(){for(var t=this.map.getInteractions(),o=t.getLength(),e=0;o>e;e++){var n=t.item(e);if(n instanceof ol.interaction.DoubleClickZoom){this.dblClickZoomInteraction=n,t.remove(n);break}}},P.PlotDraw.prototype.activateMapTools=function(){null!=this.dblClickZoomInteraction&&(this.map.getInteractions().push(this.dblClickZoomInteraction),this.dblClickZoomInteraction=null)},P.PlotEdit=function(t){t&&(goog.base(this,[]),this.activePlot=null,this.startPoint=null,this.ghostControlPoints=null,this.controlPoints=null,this.map=t,this.mapViewport=this.map.getViewport(),this.mouseOver=!1,this.elementTable={},this.activeControlPointId=null,this.mapDragPan=null)},goog.inherits(P.PlotEdit,ol.Observable),P.PlotEdit.prototype.Constants={HELPER_HIDDEN_DIV:"p-helper-hidden-div",HELPER_CONTROL_POINT_DIV:"p-helper-control-point-div"},P.PlotEdit.prototype.initHelperDom=function(){if(this.map&&this.activePlot){var t=this.getMapParentElement();if(t)for(var o=P.DomUtils.createHidden("div",t,this.Constants.HELPER_HIDDEN_DIV),e=this.getControlPoints(),n=0;n<e.length;n++){var r=this.Constants.HELPER_CONTROL_POINT_DIV+"-"+n;P.DomUtils.create("div",this.Constants.HELPER_CONTROL_POINT_DIV,o,r),this.elementTable[r]=n}}},P.PlotEdit.prototype.getMapParentElement=function(){var t=this.map.getTargetElement();if(t)return t.parentNode},P.PlotEdit.prototype.destroyHelperDom=function(){if(this.controlPoints){for(var t=0;t<this.controlPoints.length;t++){this.map.removeOverlay(this.controlPoints[t]);var o=P.DomUtils.get(this.Constants.HELPER_CONTROL_POINT_DIV+"-"+t);o&&(P.DomUtils.removeListener(o,"mousedown",this.controlPointMouseDownHandler,this),P.DomUtils.removeListener(o,"mousemove",this.controlPointMouseMoveHandler2,this))}this.controlPoints=null}var e=this.getMapParentElement(),n=P.DomUtils.get(this.Constants.HELPER_HIDDEN_DIV);n&&e&&P.DomUtils.remove(n,e)},P.PlotEdit.prototype.initControlPoints=function(){if(this.map){this.controlPoints=[];for(var t=this.getControlPoints(),o=0;o<t.length;o++){var e=this.Constants.HELPER_CONTROL_POINT_DIV+"-"+o,n=P.DomUtils.get(e),r=new ol.Overlay({id:e,position:t[o],positioning:"center-center",element:n});this.controlPoints.push(r),this.map.addOverlay(r),P.DomUtils.addListener(n,"mousedown",this.controlPointMouseDownHandler,this),P.DomUtils.addListener(n,"mousemove",this.controlPointMouseMoveHandler2,this)}}},P.PlotEdit.prototype.controlPointMouseMoveHandler2=function(t){t.stopImmediatePropagation()},P.PlotEdit.prototype.controlPointMouseDownHandler=function(t){var o=t.target.id;this.activeControlPointId=o,goog.events.listen(this.mapViewport,P.Event.EventType.MOUSEMOVE,this.controlPointMouseMoveHandler,!1,this),goog.events.listen(this.mapViewport,P.Event.EventType.MOUSEUP,this.controlPointMouseUpHandler,!1,this)},P.PlotEdit.prototype.controlPointMouseMoveHandler=function(t){var o=this.map.getCoordinateFromPixel([t.offsetX,t.offsetY]);if(this.activeControlPointId){var e=this.activePlot.getGeometry(),n=this.elementTable[this.activeControlPointId];e.updatePoint(o,n);var r=this.map.getOverlayById(this.activeControlPointId);r.setPosition(o)}},P.PlotEdit.prototype.controlPointMouseUpHandler=function(t){goog.events.unlisten(this.mapViewport,P.Event.EventType.MOUSEMOVE,this.controlPointMouseMoveHandler,!1,this),goog.events.unlisten(this.mapViewport,P.Event.EventType.MOUSEUP,this.controlPointMouseUpHandler,!1,this)},P.PlotEdit.prototype.activate=function(t){var o=this;if(t&&t instanceof ol.Feature&&t!=this.activePlot){var e=t.getGeometry();e.isPlot()&&(this.deactivate(),this.activePlot=t,setTimeout(function(){o.dispatchEvent(new P.Event.PlotEditEvent(P.Event.PlotEditEvent.ACTIVE_PLOT_CHANGE,o.activePlot))},500),this.map.on("pointermove",this.plotMouseOverOutHandler,this),this.initHelperDom(),this.initControlPoints())}},P.PlotEdit.prototype.getControlPoints=function(){if(!this.activePlot)return[];var t=this.activePlot.getGeometry();return t.getPoints()},P.PlotEdit.prototype.plotMouseOverOutHandler=function(t){var o=this.map.forEachFeatureAtPixel(t.pixel,function(t,o){return t});o&&o==this.activePlot?this.mouseOver||(this.mouseOver=!0,this.map.getViewport().style.cursor="move",this.map.on("pointerdown",this.plotMouseDownHandler,this)):this.mouseOver&&(this.mouseOver=!1,this.map.getViewport().style.cursor="default",this.map.un("pointerdown",this.plotMouseDownHandler,this))},P.PlotEdit.prototype.plotMouseDownHandler=function(t){this.ghostControlPoints=this.getControlPoints(),this.startPoint=t.coordinate,this.disableMapDragPan(),this.map.on("pointerup",this.plotMouseUpHandler,this),this.map.on("pointerdrag",this.plotMouseMoveHandler,this)},P.PlotEdit.prototype.plotMouseMoveHandler=function(t){for(var o=t.coordinate,e=o[0]-this.startPoint[0],n=o[1]-this.startPoint[1],r=[],g=0;g<this.ghostControlPoints.length;g++){var i=this.ghostControlPoints[g],s=[i[0]+e,i[1]+n];r.push(s);var a=this.Constants.HELPER_CONTROL_POINT_DIV+"-"+g,l=this.map.getOverlayById(a);l.setPosition(s),l.setPositioning("center-center")}var u=this.activePlot.getGeometry();u.setPoints(r)},
P.PlotEdit.prototype.plotMouseUpHandler=function(t){this.enableMapDragPan(),this.map.un("pointerup",this.plotMouseUpHandler,this),this.map.un("pointerdrag",this.plotMouseMoveHandler,this)},P.PlotEdit.prototype.disconnectEventHandlers=function(){this.map.un("pointermove",this.plotMouseOverOutHandler,this),goog.events.unlisten(this.mapViewport,P.Event.EventType.MOUSEMOVE,this.controlPointMouseMoveHandler,!1,this),goog.events.unlisten(this.mapViewport,P.Event.EventType.MOUSEUP,this.controlPointMouseUpHandler,!1,this),this.map.un("pointerdown",this.plotMouseDownHandler,this),this.map.un("pointerup",this.plotMouseUpHandler,this),this.map.un("pointerdrag",this.plotMouseMoveHandler,this)},P.PlotEdit.prototype.deactivate=function(){this.activePlot=null,this.mouseOver=!1,this.destroyHelperDom(),this.disconnectEventHandlers(),this.elementTable={},this.activeControlPointId=null,this.startPoint=null},P.PlotEdit.prototype.disableMapDragPan=function(){for(var t=this.map.getInteractions(),o=t.getLength(),e=0;o>e;e++){var n=t.item(e);if(n instanceof ol.interaction.DragPan){this.mapDragPan=n,n.setActive(!1);break}}},P.PlotEdit.prototype.enableMapDragPan=function(){null!=this.mapDragPan&&(this.mapDragPan.setActive(!0),this.mapDragPan=null)};